// ============================================================
// VYOMTECH ERP - COMPLETE PRISMA SCHEMA
// ============================================================
// This file is auto-generated by build-schema.js
// Do NOT edit manually - modify the modular schemas in /prisma/schemas/

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

// ============================================================
// MODULAR SCHEMAS COMBINED
// ============================================================

model Tenant {
  id                   String   @id @db.Char(36)
  name                 String   @db.VarChar(255)
  domain               String   @unique @db.VarChar(255)
  status               String   @default("active") @db.VarChar(50)
  maxUsers             Int      @default(100) @map("max_users")
  maxConcurrentCalls   Int      @default(50) @map("max_concurrent_calls")
  aiBudgetMonthly      Decimal  @default(1000.00) @map("ai_budget_monthly") @db.Decimal(15, 2)
  createdAt            DateTime @default(now()) @map("created_at")
  updatedAt            DateTime @updatedAt @map("updated_at")
  users                User[]
  currentTenantUsers   User[] @relation(name: "currentTenant")
  teams                Team[]
  systemConfigs        SystemConfig[]
  auditLogs            AuditLog[]
  callCenters          CallCenter[]
  agents               Agent[]
  aiAgents             AIAgent[]
  skills               Skill[]
  agentSkills          AgentSkill[]
  campaigns            Campaign[]
  aiCampaigns          AICampaign[]
  queues               Queue[]
  queueSkillRequirements QueueSkillRequirement[]
  queueAssignments     QueueAssignment[]
  agentCampaigns       AgentCampaign[]
  calls                Call[]
  callDispositions     CallDisposition[]
  callRecordings       CallRecording[]
  aiAgentDialogues     AIAgentDialogue[]
  aiConversationLogs   AIConversationLog[]
  callScripts          CallScript[]
  externalProviders    ExternalProvider[]
  providerConnections  ProviderConnection[]
  agentNotes           AgentNote[]
  agentPerformanceMetrics AgentPerformanceMetric[]
  userCount            TenantUserCount?
  @@index([domain])
  @@index([status])
  @@map("tenant")
}
model User {
  id                 String   @id @db.Char(36) // UUID
  email              String   @unique @db.VarChar(255)
  passwordHash       String   @db.VarChar(255) @map("password_hash")
  role               String   @default("user") @db.VarChar(50)
  tenantId           String   @db.VarChar(36) @map("tenant_id")
  currentTenantId    String?  @db.VarChar(36) @map("current_tenant_id")
  createdAt          DateTime @default(now()) @map("created_at")
  updatedAt          DateTime @updatedAt @map("updated_at")
  tenant             Tenant   @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  currentTenant      Tenant?  @relation(name: "currentTenant", fields: [currentTenantId], references: [id], onDelete: SetNull)
  passwordResetTokens PasswordResetToken[]
  authTokens         AuthToken[]
  auditLogs          AuditLog[]
  userRoles          UserRole[]
  accessLogs         AccessLog[]
  @@index([email])
  @@index([tenantId])
  @@index([role])
  @@map("user")
}
model PasswordResetToken {
  id                 String   @id @db.Char(26) // ULID
  userId             String   @db.Char(36) @map("user_id")
  token              String   @unique @db.VarChar(255)
  expiresAt          DateTime @map("expires_at")
  createdAt          DateTime @default(now()) @map("created_at")
  user               User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  @@index([userId])
  @@index([token])
  @@map("password_reset_token")
}
model AuthToken {
  id                 String   @id @db.Char(26) // ULID
  userId             String   @db.Char(36) @map("user_id")
  token              String   @unique @db.VarChar(500)
  expiresAt          DateTime @map("expires_at")
  createdAt          DateTime @default(now()) @map("created_at")
  user               User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  @@index([userId])
  @@index([token])
  @@map("auth_token")
}
model Team {
  id                 String   @id @db.Char(26) // ULID
  tenantId           String   @db.VarChar(36) @map("tenant_id")
  teamName           String   @db.VarChar(255) @map("team_name")
  description        String?  @db.LongText
  status             String   @default("active") @db.VarChar(50)
  createdAt          DateTime @default(now()) @map("created_at")
  updatedAt          DateTime @updatedAt @map("updated_at")
  tenant             Tenant   @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@index([status])
  @@map("team")
}
model SystemConfig {
  id                 String   @id @db.Char(26) // ULID
  tenantId           String   @db.VarChar(36) @map("tenant_id")
  configKey          String   @db.VarChar(255) @map("config_key")
  configValue        String?  @db.LongText @map("config_value")
  configType         String   @db.VarChar(50) @map("config_type")
  description        String?  @db.LongText
  createdAt          DateTime @default(now()) @map("created_at")
  updatedAt          DateTime @updatedAt @map("updated_at")
  tenant             Tenant   @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  @@unique([tenantId, configKey])
  @@index([tenantId])
  @@map("system_config")
}
model AuditLog {
  id                 String   @id @db.Char(26) // ULID
  tenantId           String   @db.VarChar(36) @map("tenant_id")
  userId             String?  @db.Char(36) @map("user_id")
  action             String   @db.VarChar(100)
  entityType         String   @db.VarChar(100) @map("entity_type")
  entityId           String?  @db.VarChar(36) @map("entity_id")
  changes            Json?  @map("changes")
  ipAddress          String?  @db.VarChar(45) @map("ip_address")
  createdAt          DateTime @default(now()) @map("created_at")
  tenant             Tenant   @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  user               User?    @relation(fields: [userId], references: [id], onDelete: SetNull)
  @@index([tenantId])
  @@index([userId])
  @@index([entityType, entityId])
  @@index([createdAt])
  @@map("audit_log")
}
model CallCenter {
  id                    String    @id @default(uuid()) @db.Char(36)
  tenantId              String    @db.Char(36)
  tenant                Tenant    @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  name                  String    @db.VarChar(255)
  description           String?   @db.Text
  type                  String    @db.VarChar(50) // "INBOUND", "OUTBOUND", "BLENDED"
  status                String    @default("ACTIVE") @db.VarChar(50) // "ACTIVE", "INACTIVE", "SUSPENDED"
  location              String?   @db.VarChar(255)
  phone                 String?   @db.VarChar(20)
  email                 String?   @db.VarChar(255)
  timezone              String    @default("Asia/Kolkata") @db.VarChar(100)
  operatingHoursStart   String?   @db.VarChar(10) // HH:MM format
  operatingHoursEnd     String?   @db.VarChar(10) // HH:MM format
  isHolidayOperating    Boolean   @default(false)
  maxAgents             Int       @default(50)
  maxCampaigns          Int       @default(10)
  maxQueues             Int       @default(20)
  currencyCode          String    @default("INR") @db.VarChar(10)
  costPerMinute         Decimal   @default(0) @db.Decimal(10, 2)
  costPerCall           Decimal   @default(0) @db.Decimal(10, 2)
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt
  agents                Agent[]
  campaigns             Campaign[]
  queues                Queue[]
  dispositions          CallDisposition[]
  calls                 Call[]
  recordings            CallRecording[]
  scripts               CallScript[]
  aiAgents              AIAgent[]
  skills                Skill[]
  externalProviders     ExternalProvider[]
  @@index([tenantId])
  @@map("call_centers")
}
model Agent {
  id                    String    @id @default(uuid()) @db.Char(36)
  tenantId              String    @db.Char(36)
  tenant                Tenant    @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  callCenterId          String    @db.Char(36)
  callCenter            CallCenter @relation(fields: [callCenterId], references: [id], onDelete: Cascade)
  employeeId            String?   @db.Char(36) // Link to HR Employee if exists
  agentId               String    @unique @db.VarChar(50) // Unique agent ID like CC001, CC002
  name                  String    @db.VarChar(255)
  email                 String    @db.VarChar(255)
  phone                 String    @db.VarChar(20)
  status                String    @default("OFFLINE") @db.VarChar(50)
  currentCallId         String?   @unique @db.Char(36)
  currentCall           Call?     @relation("CurrentCall", fields: [currentCallId], references: [id], onDelete: SetNull)
  lastStatusChangeTime  DateTime?
  lastCallEndTime       DateTime?
  assignmentType        String    @default("ANY") @db.VarChar(50)
  stickyAgentPreference Boolean   @default(false) // If true, tries to assign same agent to same customer
  totalCalls            Int       @default(0)
  totalHandleTime       Int       @default(0) // In seconds
  averageHandleTime     Int       @default(0) // In seconds
  totalWrapUpTime       Int       @default(0) // In seconds
  startDate             DateTime
  endDate               DateTime?
  workDaysJson          String?   @db.Text // JSON: ["MON", "TUE", "WED", "THU", "FRI"]
  workingHoursStart     String    @default("09:00") @db.VarChar(10)
  workingHoursEnd       String    @default("18:00") @db.VarChar(10)
  breakDurationMinutes  Int       @default(15)
  lunchDurationMinutes  Int       @default(60)
  isTraining            Boolean   @default(false)
  trainingUntil         DateTime?
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt
  agentSkills           AgentSkill[]
  agentCampaigns        AgentCampaign[]
  performanceMetrics    AgentPerformanceMetric[]
  notes                 AgentNote[]
  queueAssignments      QueueAssignment[]
  @@index([tenantId])
  @@index([callCenterId])
  @@index([employeeId])
  @@index([status])
  @@map("agents")
}
model AIAgent {
  id                    String    @id @default(uuid()) @db.Char(36)
  tenantId              String    @db.Char(36)
  tenant                Tenant    @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  callCenterId          String    @db.Char(36)
  callCenter            CallCenter @relation(fields: [callCenterId], references: [id], onDelete: Cascade)
  agentId               String    @unique @db.VarChar(50) // Like AI_AGENT_001
  name                  String    @db.VarChar(255)
  description           String?   @db.Text
  provider              String    @db.VarChar(100)
  providerAgentId       String    @db.VarChar(255) // External AI agent ID from provider
  providerApiKey        String?   @db.Text // Encrypted
  providerConfig        String?   @db.Text // JSON: detailed provider config
  language              String    @default("hi") @db.VarChar(10) // ISO 639-1 code: "en", "hi", "ta", "te", etc.
  voiceType             String    @default("FEMALE") @db.VarChar(50) // "MALE", "FEMALE", "NEUTRAL"
  voiceAccent           String?   @db.VarChar(100) // "INDIAN", "AMERICAN", "BRITISH", etc.
  supportedLanguages    String    @db.VarChar(255) @default("en,hi") // CSV
  sentiment             String    @default("PROFESSIONAL") @db.VarChar(50) // "PROFESSIONAL", "FRIENDLY", "FORMAL", "CASUAL"
  usesNLU               Boolean   @default(true) // Natural Language Understanding
  usesNLG               Boolean   @default(true) // Natural Language Generation
  learningEnabled       Boolean   @default(true) // Improve from conversations
  emotionDetection      Boolean   @default(true)
  intentRecognition     Boolean   @default(true)
  canMakeOutbound       Boolean   @default(true)
  canReceiveInbound     Boolean   @default(true)
  canConferenceCall     Boolean   @default(false)
  canTransfer           Boolean   @default(true)
  handoverThreshold     Decimal   @default(0.6) @db.Decimal(3, 2) // Confidence threshold (0-1) for handover to human
  handoverPreference    String    @db.VarChar(50) // "AUTO", "REQUIRED", "OPTIONAL"
  status                String    @default("ACTIVE") @db.VarChar(50) // "ACTIVE", "INACTIVE", "TRAINING", "MAINTENANCE"
  isAvailable           Boolean   @default(true)
  currentCallId         String?   @unique @db.Char(36)
  currentCall           Call?     @relation("CurrentAICall", fields: [currentCallId], references: [id], onDelete: SetNull)
  totalCalls            Int       @default(0)
  successfulCalls       Int       @default(0) // Calls completed without transfer
  transferredCalls      Int       @default(0) // Calls transferred to human
  averageConfidence     Decimal   @default(0) @db.Decimal(5, 2) // % confidence in responses
  customerSatisfaction  Decimal   @default(0) @db.Decimal(5, 2) // CSAT score
  scriptId              String?   @db.Char(36)
  script                CallScript? @relation("AIAgentScript", fields: [scriptId], references: [id], onDelete: SetNull)
  knowledgeBaseId       String?   @db.Char(36) // Reference to knowledge base
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt
  calls                 Call[]
  aiCampaigns           AICampaign[]
  aiAgentDialogues      AIAgentDialogue[]
  aiConversationLogs    AIConversationLog[]
  @@index([tenantId])
  @@index([callCenterId])
  @@index([status])
  @@map("ai_agents")
}
model Skill {
  id                    String    @id @default(uuid()) @db.Char(36)
  tenantId              String    @db.Char(36)
  tenant                Tenant    @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  callCenterId          String    @db.Char(36)
  callCenter            CallCenter @relation(fields: [callCenterId], references: [id], onDelete: Cascade)
  skillName             String    @db.VarChar(255)
  description           String?   @db.Text
  skillCategory         String    @db.VarChar(100) // "PRODUCT", "LANGUAGE", "TECHNICAL", "CUSTOMER_TYPE", etc.
  level                 String    @default("BEGINNER") @db.VarChar(50) // "BEGINNER", "INTERMEDIATE", "ADVANCED", "EXPERT"
  routingPriority       Int       @default(1) // Lower = higher priority for routing
  minimumProficiency    String    @default("BEGINNER") @db.VarChar(50)
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt
  agentSkills           AgentSkill[]
  queueSkillRequirements QueueSkillRequirement[]
  @@index([tenantId])
  @@index([callCenterId])
  @@map("skills")
}
model AgentSkill {
  id                    String    @id @default(uuid()) @db.Char(36)
  tenantId              String    @db.Char(36)
  tenant                Tenant    @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  agentId               String    @db.Char(36)
  agent                 Agent     @relation(fields: [agentId], references: [id], onDelete: Cascade)
  skillId               String    @db.Char(36)
  skill                 Skill     @relation(fields: [skillId], references: [id], onDelete: Cascade)
  proficiency           String    @default("BEGINNER") @db.VarChar(50)
  yearsOfExperience     Int       @default(0)
  isVerified            Boolean   @default(false)
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt
  @@unique([agentId, skillId])
  @@index([tenantId])
  @@map("agent_skills")
}
model Campaign {
  id                    String    @id @default(uuid()) @db.Char(36)
  tenantId              String    @db.Char(36)
  tenant                Tenant    @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  callCenterId          String    @db.Char(36)
  callCenter            CallCenter @relation(fields: [callCenterId], references: [id], onDelete: Cascade)
  campaignName          String    @db.VarChar(255)
  description           String?   @db.Text
  campaignType          String    @db.VarChar(50) // "INBOUND", "OUTBOUND", "BLENDED"
  purpose               String    @db.VarChar(100) // "PRESALES", "SALES", "SUPPORT", "FEEDBACK", "COLLECTION"
  status                String    @default("DRAFT") @db.VarChar(50) // "DRAFT", "ACTIVE", "PAUSED", "COMPLETED", "CANCELLED"
  startDate             DateTime?
  endDate               DateTime?
  assignmentStrategy    String    @default("LEAST_BUSY") @db.VarChar(50)
  stickyAgentEnabled    Boolean   @default(false)
  stickyAgentDuration   Int       @default(86400) // In seconds, 24 hours default
  allowAIAgent          Boolean   @default(false)
  allowHumanAgent       Boolean   @default(true)
  aiAgentPriority       Int       @default(1) // 1 = AI first, 2 = Human first, 3 = Balanced
  routeBySource         Boolean   @default(false)
  routeBySubSource      Boolean   @default(false)
  routeByLeadSource     Boolean   @default(true)
  maxWaitTime           Int       @default(900) // In seconds, 15 minutes
  abandonedCallHandling String    @db.VarChar(50) // "VOICEMAIL", "CALLBACK", "SMS", "EMAIL"
  salesProjectId        String?   @db.Char(36) // Link to CRM Project
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt
  agentCampaigns        AgentCampaign[]
  aiCampaigns           AICampaign[]
  calls                 Call[]
  @@index([tenantId])
  @@index([callCenterId])
  @@index([status])
  @@map("campaigns")
}
model AICampaign {
  id                    String    @id @default(uuid()) @db.Char(36)
  tenantId              String    @db.Char(36)
  tenant                Tenant    @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  campaignId            String    @db.Char(36)
  campaign              Campaign  @relation(fields: [campaignId], references: [id], onDelete: Cascade)
  aiAgentId             String    @db.Char(36)
  aiAgent               AIAgent   @relation(fields: [aiAgentId], references: [id], onDelete: Cascade)
  assignmentPercentage  Int       @default(50) // % of calls to route to this AI agent
  priority              Int       @default(1)
  isActive              Boolean   @default(true)
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt
  @@unique([campaignId, aiAgentId])
  @@index([tenantId])
  @@map("ai_campaigns")
}
model Queue {
  id                    String    @id @default(uuid()) @db.Char(36)
  tenantId              String    @db.Char(36)
  tenant                Tenant    @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  callCenterId          String    @db.Char(36)
  callCenter            CallCenter @relation(fields: [callCenterId], references: [id], onDelete: Cascade)
  queueName             String    @db.VarChar(255)
  queueNumber           String    @db.VarChar(50)
  description           String?   @db.Text
  maxCapacity           Int       @default(100)
  currentSize           Int       @default(0)
  routingStrategy       String    @default("FIFO") @db.VarChar(50) // "FIFO", "PRIORITY", "SKILL_BASED", "WEIGHTED"
  priorityQueueEnabled  Boolean   @default(false)
  timeoutSeconds        Int       @default(300) // Call timeout in queue
  abandonmentThreshold  Int       @default(600) // When to mark as abandoned
  welcomeMessageId      String?   @db.Char(36)
  hasWelcomeMessage     Boolean   @default(false)
  holdMusicUrl          String?   @db.Text
  hasHoldMusic          Boolean   @default(false)
  status                String    @default("ACTIVE") @db.VarChar(50)
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt
  calls                 Call[]
  queueAssignments      QueueAssignment[]
  queueSkillRequirements QueueSkillRequirement[]
  @@index([tenantId])
  @@index([callCenterId])
  @@map("queues")
}
model QueueSkillRequirement {
  id                    String    @id @default(uuid()) @db.Char(36)
  tenantId              String    @db.Char(36)
  tenant                Tenant    @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  queueId               String    @db.Char(36)
  queue                 Queue     @relation(fields: [queueId], references: [id], onDelete: Cascade)
  skillId               String    @db.Char(36)
  skill                 Skill     @relation(fields: [skillId], references: [id], onDelete: Cascade)
  isRequired            Boolean   @default(false)
  minimumProficiency    String    @default("BEGINNER") @db.VarChar(50)
  weight                Int       @default(1) // Importance in routing
  @@unique([queueId, skillId])
  @@index([tenantId])
  @@map("queue_skill_requirements")
}
model QueueAssignment {
  id                    String    @id @default(uuid()) @db.Char(36)
  tenantId              String    @db.Char(36)
  tenant                Tenant    @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  agentId               String    @db.Char(36)
  agent                 Agent     @relation(fields: [agentId], references: [id], onDelete: Cascade)
  queueId               String    @db.Char(36)
  queue                 Queue     @relation(fields: [queueId], references: [id], onDelete: Cascade)
  assignmentType        String    @default("PRIMARY") @db.VarChar(50) // "PRIMARY", "SECONDARY", "BACKUP"
  priority              Int       @default(1)
  assignmentStartTime   DateTime  @default(now())
  assignmentEndTime     DateTime?
  isActive              Boolean   @default(true)
  @@unique([agentId, queueId, assignmentStartTime])
  @@index([tenantId])
  @@map("queue_assignments")
}
model AgentCampaign {
  id                    String    @id @default(uuid()) @db.Char(36)
  tenantId              String    @db.Char(36)
  tenant                Tenant    @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  agentId               String    @db.Char(36)
  agent                 Agent     @relation(fields: [agentId], references: [id], onDelete: Cascade)
  campaignId            String    @db.Char(36)
  campaign              Campaign  @relation(fields: [campaignId], references: [id], onDelete: Cascade)
  assignmentType        String    @default("PRIMARY") @db.VarChar(50)
  priority              Int       @default(1)
  assignmentStartTime   DateTime  @default(now())
  assignmentEndTime     DateTime?
  isActive              Boolean   @default(true)
  @@unique([agentId, campaignId, assignmentStartTime])
  @@index([tenantId])
  @@map("agent_campaigns")
}
model Call {
  id                    String    @id @default(uuid()) @db.Char(36)
  tenantId              String    @db.Char(36)
  tenant                Tenant    @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  callCenterId          String    @db.Char(36)
  callCenter            CallCenter @relation(fields: [callCenterId], references: [id], onDelete: Cascade)
  callId                String    @unique @db.VarChar(50) // Unique call reference
  callULID              String    @unique @db.Char(26) // ULID for transaction tracking
  campaignId            String?   @db.Char(36)
  campaign              Campaign? @relation(fields: [campaignId], references: [id], onDelete: SetNull)
  queueId               String?   @db.Char(36)
  queue                 Queue?    @relation(fields: [queueId], references: [id], onDelete: SetNull)
  callDirection         String    @db.VarChar(20) // "INBOUND", "OUTBOUND"
  callerId              String    @db.VarChar(20)
  callerName            String?   @db.VarChar(255)
  callerEmail           String?   @db.VarChar(255)
  recipientId           String?   @db.VarChar(20)
  recipientName         String?   @db.VarChar(255)
  leadId                String?   @db.Char(36) // CRM SalesLead
  customerId            String?   @db.Char(36) // CRM Customer
  customer              SalesCustomer? @relation(fields: [customerId], references: [id], onDelete: SetNull)
  agentId               String?   @db.Char(36)
  aiAgentId             String?   @db.Char(36)
  aiAgent               AIAgent?  @relation(fields: [aiAgentId], references: [id], onDelete: SetNull)
  callType              String    @db.VarChar(50) // "VOICE", "VIDEO", "VOICEMAIL", "CALLBACK"
  source                String    @db.VarChar(100) // "INBOUND_CALL", "WEBSITE_FORM", "APP", "SMS", "EMAIL", "SOCIAL_MEDIA"
  subSource             String?   @db.VarChar(100) // "GOOGLE_SEARCH", "FACEBOOK_AD", "INSTAGRAM", etc.
  campaignSource        String?   @db.VarChar(100) // Campaign that generated the lead
  callStatus            String    @default("INITIATED") @db.VarChar(50)
  callInitiatedAt       DateTime  @default(now())
  callConnectedAt       DateTime?
  callEndedAt           DateTime?
  callDurationSeconds   Int       @default(0)
  dispositionId         String?   @db.Char(36)
  disposition           CallDisposition? @relation(fields: [dispositionId], references: [id], onDelete: SetNull)
  notes                 String?   @db.Text
  transferredFromAgentId String? @db.Char(36)
  transferredToAgentId  String?  @db.Char(36)
  transferredToAIAgentId String? @db.Char(36)
  transferReason        String?  @db.VarChar(255)
  transferredAt         DateTime?
  aiHandlingDuration    Int?      // In seconds, how long AI handled before transfer
  aiConfidenceScore     Decimal?  @db.Decimal(5, 2) // Confidence in AI response
  wasHandledByAI        Boolean   @default(false)
  wasTransferredFromAI  Boolean   @default(false)
  aiTranscript          String?   @db.Text // If AI handled call
  recordingUrl          String?   @db.Text
  recordingId           String?   @db.VarChar(255)
  recordingStatus       String?   @db.VarChar(50) // "PENDING", "COMPLETED", "FAILED", "DELETED"
  isCallRecorded        Boolean   @default(false)
  satScore              Int?      // 1-5 CSAT score
  feedback              String?   @db.Text
  isSensitive           Boolean   @default(false)
  requiresAudit         Boolean   @default(false)
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt
  currentAgentCall      Agent?    @relation("CurrentCall")
  currentAIAgentCall    AIAgent?  @relation("CurrentAICall")
  recordings            CallRecording[]
  aiDialogues           AIAgentDialogue[]
  conversationLogs      AIConversationLog[]
  @@index([tenantId])
  @@index([callCenterId])
  @@index([campaignId])
  @@index([queueId])
  @@index([agentId])
  @@index([aiAgentId])
  @@index([leadId])
  @@index([customerId])
  @@index([callStatus])
  @@index([callInitiatedAt])
  @@map("calls")
}
model CallDisposition {
  id                    String    @id @default(uuid()) @db.Char(36)
  tenantId              String    @db.Char(36)
  tenant                Tenant    @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  callCenterId          String    @db.Char(36)
  callCenter            CallCenter @relation(fields: [callCenterId], references: [id], onDelete: Cascade)
  dispositionCode       String    @db.VarChar(50)
  dispositionName       String    @db.VarChar(255)
  description           String?   @db.Text
  dispositionCategory   String    @db.VarChar(100) // "SUCCESSFUL", "UNSUCCESSFUL", "TRANSFERRED", "VOICEMAIL", "CALLBACK", "DO_NOT_CALL"
  isPositive            Boolean   @default(false)
  allowsNotes           Boolean   @default(true)
  requiresFollowup      Boolean   @default(false)
  requiresCallback      Boolean   @default(false)
  allowsWrapupTime      Boolean   @default(true)
  sequenceOrder         Int       @default(1)
  isActive              Boolean   @default(true)
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt
  calls                 Call[]
  @@unique([callCenterId, dispositionCode])
  @@index([tenantId])
  @@index([callCenterId])
  @@map("call_dispositions")
}
model CallRecording {
  id                    String    @id @default(uuid()) @db.Char(36)
  tenantId              String    @db.Char(36)
  tenant                Tenant    @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  callCenterId          String    @db.Char(36)
  callCenter            CallCenter @relation(fields: [callCenterId], references: [id], onDelete: Cascade)
  callId                String    @db.Char(36)
  call                  Call      @relation(fields: [callId], references: [id], onDelete: Cascade)
  recordingUrl          String    @db.Text
  recordingExternalId   String    @db.VarChar(255)
  fileSize              BigInt? // In bytes
  fileDuration          Int? // In seconds
  fileFormat            String    @db.VarChar(20) // "MP3", "WAV", "OGG"
  status                String    @default("PROCESSING") @db.VarChar(50) // "PROCESSING", "COMPLETED", "FAILED"
  hasTranscript         Boolean   @default(false)
  transcriptUrl         String?   @db.Text
  transcriptText        String?   @db.LongText // Full transcript
  transcriptionAccuracy Decimal?  @db.Decimal(5, 2) // Confidence %
  hasSentimentAnalysis  Boolean   @default(false)
  overallSentiment      String?   @db.VarChar(50) // "POSITIVE", "NEUTRAL", "NEGATIVE"
  sentimentScore        Decimal?  @db.Decimal(5, 2) // -1 to 1
  isCompliant           Boolean?  // Null = not checked
  complianceNotes       String?   @db.Text
  retentionDays         Int? // Days to retain
  deleteAfterDate       DateTime?
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt
  @@index([tenantId])
  @@index([callCenterId])
  @@index([callId])
  @@map("call_recordings")
}
model AIAgentDialogue {
  id                    String    @id @default(uuid()) @db.Char(36)
  tenantId              String    @db.Char(36)
  tenant                Tenant    @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  callId                String    @db.Char(36)
  call                  Call      @relation(fields: [callId], references: [id], onDelete: Cascade)
  aiAgentId             String    @db.Char(36)
  aiAgent               AIAgent   @relation(fields: [aiAgentId], references: [id], onDelete: Cascade)
  turnNumber            Int
  speaker               String    @db.VarChar(20) // "CALLER", "AI_AGENT"
  rawText               String    @db.Text
  cleanedText           String    @db.Text
  intent                String?   @db.VarChar(255)
  entities              String?   @db.Text // JSON array of entities
  sentiment             String?   @db.VarChar(50) // "POSITIVE", "NEUTRAL", "NEGATIVE"
  sentimentScore        Decimal?  @db.Decimal(5, 2)
  confidence            Decimal   @default(0) @db.Decimal(5, 2) // AI confidence in response
  generatedResponse     String?   @db.Text
  responseType          String?   @db.VarChar(100) // "ANSWER", "CLARIFICATION", "HANDOVER_NOTICE", "GOODBYE"
  turnStartTime         DateTime  @default(now())
  turnDurationSeconds   Int? // Time to generate response
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt
  @@index([tenantId])
  @@index([callId])
  @@index([aiAgentId])
  @@map("ai_agent_dialogues")
}
model AIConversationLog {
  id                    String    @id @default(uuid()) @db.Char(36)
  tenantId              String    @db.Char(36)
  tenant                Tenant    @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  callId                String    @db.Char(36)
  call                  Call      @relation(fields: [callId], references: [id], onDelete: Cascade)
  aiAgentId             String    @db.Char(36)
  aiAgent               AIAgent   @relation(fields: [aiAgentId], references: [id], onDelete: Cascade)
  totalTurns            Int
  averageConfidence     Decimal   @db.Decimal(5, 2)
  dominantIntent        String?   @db.VarChar(255)
  multipleIntents       Boolean   @default(false)
  overallSentiment      String?   @db.VarChar(50)
  sentimentTrend        String?   @db.VarChar(20) // "IMPROVING", "DECLINING", "STABLE"
  handoverReason        String?   @db.VarChar(255)
  handoverConfidence    Decimal?  @db.Decimal(5, 2)
  flaggedForReview      Boolean   @default(false)
  reviewNotes           String?   @db.Text
  trainingDataUsed      Boolean   @default(true)
  callerSatisfaction    Decimal?  @db.Decimal(5, 2) // CSAT from post-call survey
  issueResolved         Boolean?
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt
  @@index([tenantId])
  @@index([callId])
  @@index([aiAgentId])
  @@map("ai_conversation_logs")
}
model CallScript {
  id                    String    @id @default(uuid()) @db.Char(36)
  tenantId              String    @db.Char(36)
  tenant                Tenant    @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  callCenterId          String    @db.Char(36)
  callCenter            CallCenter @relation(fields: [callCenterId], references: [id], onDelete: Cascade)
  scriptName            String    @db.VarChar(255)
  description           String?   @db.Text
  scriptType            String    @db.VarChar(50) // "GREETING", "PITCH", "OBJECTION_HANDLING", "CLOSING", "CUSTOM"
  purpose               String    @db.VarChar(100) // "PRESALES", "SALES", "SUPPORT", "FEEDBACK"
  scriptContent         String    @db.LongText // Detailed script text
  scriptVariations      String?   @db.Text // JSON: alternative phrasings
  isAIOptimized         Boolean   @default(false)
  aiTrainingScore       Decimal?  @db.Decimal(5, 2) // How well AI performs with this script
  complianceChecked     Boolean   @default(false)
  complianceNotes       String?   @db.Text
  isActive              Boolean   @default(true)
  version               Int       @default(1)
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt
  aiAgents              AIAgent[] @relation("AIAgentScript")
  @@index([tenantId])
  @@index([callCenterId])
  @@map("call_scripts")
}
model ExternalProvider {
  id                    String    @id @default(uuid()) @db.Char(36)
  tenantId              String    @db.Char(36)
  tenant                Tenant    @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  callCenterId          String    @db.Char(36)
  callCenter            CallCenter @relation(fields: [callCenterId], references: [id], onDelete: Cascade)
  providerName          String    @db.VarChar(100)
  providerType          String    @db.VarChar(50)
  apiEndpoint           String    @db.Text
  apiKey                String    @db.Text // Encrypted
  apiSecret             String?   @db.Text // Encrypted
  accountId             String?   @db.VarChar(255)
  country               String    @default("IN") @db.VarChar(10)
  supportedCountries    String    @db.Text // CSV
  supportsInbound       Boolean   @default(true)
  supportsOutbound      Boolean   @default(true)
  supportsConference    Boolean   @default(false)
  supportsRecording     Boolean   @default(true)
  supportsIVR           Boolean   @default(true)
  supportsTransfer      Boolean   @default(true)
  allocatedNumbers      String    @db.Text // JSON: list of phone numbers
  numberFormat          String    @default("E.164") @db.VarChar(20)
  costModel             String    @db.VarChar(50) // "PER_MINUTE", "PER_CALL", "MONTHLY", "HYBRID"
  costPerMinute         Decimal?  @db.Decimal(10, 4)
  costPerCall           Decimal?  @db.Decimal(10, 2)
  setupCost             Decimal?  @db.Decimal(10, 2)
  status                String    @default("ACTIVE") @db.VarChar(50) // "ACTIVE", "INACTIVE", "TESTING", "ERROR"
  lastHealthCheck       DateTime?
  isHealthy             Boolean   @default(true)
  webhookUrl            String?   @db.Text // Our webhook URL for provider callbacks
  webhookSecret         String?   @db.Text // Encrypted
  notes                 String?   @db.Text
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt
  providerConnections   ProviderConnection[]
  @@unique([tenantId, callCenterId, providerName])
  @@index([tenantId])
  @@index([callCenterId])
  @@index([status])
  @@map("external_providers")
}
model ProviderConnection {
  id                    String    @id @default(uuid()) @db.Char(36)
  tenantId              String    @db.Char(36)
  tenant                Tenant    @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  providerId            String    @db.Char(36)
  provider              ExternalProvider @relation(fields: [providerId], references: [id], onDelete: Cascade)
  callCenterId          String    @db.Char(36)
  isPrimary             Boolean   @default(false) // Primary provider for failover
  priority              Int       @default(1) // Lower = higher priority
  allocationPercentage  Int       @default(100) // % of calls to route to this provider
  isActive              Boolean   @default(true)
  connectionStatus      String    @default("CONNECTED") @db.VarChar(50) // "CONNECTED", "DISCONNECTED", "ERROR", "TESTING"
  connectedAt           DateTime?
  lastActivityAt        DateTime?
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt
  @@unique([providerId, callCenterId])
  @@index([tenantId])
  @@map("provider_connections")
}
model AgentNote {
  id                    String    @id @default(uuid()) @db.Char(36)
  tenantId              String    @db.Char(36)
  tenant                Tenant    @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  agentId               String    @db.Char(36)
  agent                 Agent     @relation(fields: [agentId], references: [id], onDelete: Cascade)
  noteType              String    @db.VarChar(50) // "PERFORMANCE", "FEEDBACK", "TRAINING", "INCIDENT", "PERSONAL"
  noteTitle             String    @db.VarChar(255)
  noteContent           String    @db.Text
  severity              String?   @db.VarChar(20) // "LOW", "MEDIUM", "HIGH", "CRITICAL"
  createdBy             String    @db.VarChar(255)
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt
  @@index([tenantId])
  @@index([agentId])
  @@map("agent_notes")
}
model AgentPerformanceMetric {
  id                    String    @id @default(uuid()) @db.Char(36)
  tenantId              String    @db.Char(36)
  tenant                Tenant    @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  agentId               String    @db.Char(36)
  agent                 Agent     @relation(fields: [agentId], references: [id], onDelete: Cascade)
  metricDate            DateTime
  metricPeriod          String    @default("DAILY") @db.VarChar(20) // "DAILY", "WEEKLY", "MONTHLY"
  totalCalls            Int       @default(0)
  inboundCalls          Int       @default(0)
  outboundCalls         Int       @default(0)
  answeredCalls         Int       @default(0)
  missedCalls           Int       @default(0)
  totalTalkTime         Int       @default(0) // In seconds
  totalHoldTime         Int       @default(0)
  totalWrapUpTime       Int       @default(0)
  totalBreakTime        Int       @default(0)
  answerRate            Decimal   @default(0) @db.Decimal(5, 2) // %
  averageHandleTime     Int       @default(0) // In seconds
  averageHoldTime       Decimal   @default(0) @db.Decimal(8, 2)
  averageCSAT           Decimal   @default(0) @db.Decimal(5, 2) // CSAT score
  transferRate          Decimal   @default(0) @db.Decimal(5, 2) // %
  salesConversions      Int       @default(0)
  conversionRate        Decimal   @default(0) @db.Decimal(5, 2) // %
  totalSalesValue       Decimal   @default(0) @db.Decimal(15, 2)
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt
  @@unique([agentId, metricDate, metricPeriod])
  @@index([tenantId])
  @@index([agentId])
  @@index([metricDate])
  @@map("agent_performance_metrics")
}
enum AttributionBucket {
  SEO              // Organic search (Google, Bing, Yahoo, Discover, Local Pack)
  SEM              // Paid search (Google Ads, Bing Ads, etc)
  SMM              // Social media (Facebook, Instagram, LinkedIn, Twitter, YouTube)
  PORTALS          // Listing platforms (99acres, MagicBricks, Housing, NoBroker, SquareYards)
  OWNED            // Your assets (Website, WhatsApp, Email, SMS, CRM Remarketing)
  OFFLINE          // Physical touchpoints (Walk-ins, Print, BTL Activations)
  AFFILIATE        // Channel partners (Brokers, Referrals, Consultants)
  DIRECT           // Residual/Direct traffic (Direct, Bookmark, Typed URL)
  @@map("attribution_bucket")
}
enum AttributionSource {
  google
  bing
  yahoo
  other_search
  meta               // Facebook + Instagram parent
  instagram
  facebook
  youtube
  linkedin
  twitter
  portal_99acres
  portal_magicbricks
  portal_housing
  portal_nobroker
  portal_squareyards
  website
  whatsapp
  email
  sms
  crm
  walk_in
  print_media
  btl_activation
  broker
  referral
  consultant
  direct
  @@map("attribution_source")
}
enum AttributionSubSource {
  google_organic
  bing_organic
  yahoo_organic
  discover
  local_pack
  google_search_ads
  google_display_ads
  youtube_ads
  performance_max
  bing_ads
  facebook_ads
  instagram_ads
  linkedin_ads
  twitter_ads
  instagram_organic
  facebook_organic
  youtube_organic
  linkedin_organic
  portal_listing      // Generic for all portals
  web_form
  whatsapp_chat
  email_campaign
  sms_campaign
  crm_remarketing
  walk_in_site        // At site/project
  walk_in_office      // At office
  newspaper
  magazine
  flyers
  brochure
  mall_stall
  roadshow_stall
  expo_stall
  society_activation
  channel_partner
  referral_agent
  property_consultant
  direct_unknown
  bookmark
  typed_url
  @@map("attribution_subsource")
}
model AttributionEvent {
  id                    String                @id @db.Char(36)
  tenantId              String                @db.VarChar(36) @map("tenant_id")
  eventId               String                @db.Char(26) @map("event_id") // ULID
  leadId                String?               @db.VarChar(36) @map("lead_id")
  visitorId             String?               @db.VarChar(36) @map("visitor_id")
  sessionId             String?               @db.VarChar(100) @map("session_id")
  attributionBucket     AttributionBucket     @map("attribution_bucket")
  attributionSource     AttributionSource     @map("attribution_source")
  attributionSubSource  AttributionSubSource  @map("attribution_subsource")
  eventType             String                @db.VarChar(100) @map("event_type") // page_view, form_submit, call, sms, whatsapp_msg, site_visit, etc
  eventValue            Decimal?              @db.Decimal(15, 2) @map("event_value")
  eventData             String?               @db.LongText @map("event_data") // JSON: {form_fields, call_duration, conversion_type, etc}
  campaign              String?               @db.VarChar(255)
  adSet                 String?               @db.VarChar(255) @map("ad_set")
  ad                    String?               @db.VarChar(255)
  keyword               String?               @db.VarChar(255)
  referrer              String?               @db.Text
  userAgent             String?               @db.Text @map("user_agent")
  ipAddress             String?               @db.VarChar(45) @map("ip_address")
  country               String?               @db.VarChar(100)
  state                 String?               @db.VarChar(100)
  city                  String?               @db.VarChar(100)
  source                String?               @db.VarChar(100) // e.g., "web_pixel", "api", "manual", "import"
  isTest                Boolean               @default(false) @map("is_test")
  eventTimestamp        DateTime              @db.DateTime @map("event_timestamp")
  createdAt             DateTime              @default(now()) @map("created_at")
  lead                  SalesLead?            @relation(fields: [leadId], references: [id], onDelete: SetNull)
  @@unique([tenantId, eventId])
  @@index([tenantId, attributionBucket])
  @@index([tenantId, attributionSource])
  @@index([tenantId, attributionSubSource])
  @@index([tenantId, eventTimestamp])
  @@index([tenantId, leadId])
  @@index([tenantId, visitorId])
  @@index([tenantId, campaign])
  @@index([leadId])
  @@index([visitorId])
  @@map("attribution_event")
}
model AttributionBucketConfig {
  id                    String                @id @db.Char(36)
  tenantId              String                @db.VarChar(36) @map("tenant_id")
  bucket                AttributionBucket     @map("bucket")
  bucketLabel           String                @db.VarChar(100) @map("bucket_label")
  bucketDescription     String?               @db.Text @map("bucket_description")
  isActive              Boolean               @default(true) @map("is_active")
  priority              Int                   @default(0) // For attribution model weighting
  weight                Decimal               @default(1.0) @db.Decimal(5, 2) // For custom attribution models
  createdAt             DateTime              @default(now()) @map("created_at")
  updatedAt             DateTime              @updatedAt @map("updated_at")
  @@unique([tenantId, bucket])
  @@index([tenantId, isActive])
  @@map("attribution_bucket_config")
}
model AttributionSourceConfig {
  id                    String                @id @db.Char(36)
  tenantId              String                @db.VarChar(36) @map("tenant_id")
  source                AttributionSource     @map("source")
  sourceLabel           String                @db.VarChar(100) @map("source_label")
  sourceDescription     String?               @db.Text @map("source_description")
  isActive              Boolean               @default(true) @map("is_active")
  requiresAuthorization Boolean               @default(false) @map("requires_authorization")
  apiKeyRequired        Boolean               @default(false) @map("api_key_required")
  integrationUrl        String?               @db.VarChar(500) @map("integration_url")
  lastSyncDate          DateTime?             @map("last_sync_date")
  createdAt             DateTime              @default(now()) @map("created_at")
  updatedAt             DateTime              @updatedAt @map("updated_at")
  @@unique([tenantId, source])
  @@index([tenantId, isActive])
  @@map("attribution_source_config")
}
model LeadAttributionSnapshot {
  id                    String                @id @db.Char(36)
  tenantId              String                @db.VarChar(36) @map("tenant_id")
  leadId                String                @db.VarChar(36) @map("lead_id")
  firstTouchBucket      AttributionBucket?    @map("first_touch_bucket")
  firstTouchSource      AttributionSource?    @map("first_touch_source")
  firstTouchSubSource   AttributionSubSource? @map("first_touch_subsource")
  firstTouchCampaign    String?               @db.VarChar(255) @map("first_touch_campaign")
  firstTouchDate        DateTime?             @map("first_touch_date")
  lastTouchBucket       AttributionBucket?    @map("last_touch_bucket")
  lastTouchSource       AttributionSource?    @map("last_touch_source")
  lastTouchSubSource    AttributionSubSource? @map("last_touch_subsource")
  lastTouchCampaign     String?               @db.VarChar(255) @map("last_touch_campaign")
  lastTouchDate         DateTime?             @map("last_touch_date")
  totalTouches          Int                   @default(1) @map("total_touches")
  touchesByBucket       String?               @db.LongText @map("touches_by_bucket") // JSON: {SEO: 2, SEM: 1, SMM: 3}
  touchesBySource       String?               @db.LongText @map("touches_by_source") // JSON: {google: 1, meta: 2, linkedin: 1}
  touchSequence         String?               @db.LongText @map("touch_sequence") // JSON: [{bucket, source, subsource, date}, ...]
  conversionBucket      AttributionBucket?    @map("conversion_bucket")
  conversionSource      AttributionSource?    @map("conversion_source")
  conversionSubSource   AttributionSubSource? @map("conversion_subsource")
  conversionDate        DateTime?             @map("conversion_date")
  snaphotDate           DateTime              @map("snapshot_date") @db.Date
  isConverted           Boolean               @default(false) @map("is_converted")
  conversionValue       Decimal?              @db.Decimal(15, 2) @map("conversion_value")
  createdAt             DateTime              @default(now()) @map("created_at")
  updatedAt             DateTime              @updatedAt @map("updated_at")
  lead                  SalesLead             @relation(fields: [leadId], references: [id], onDelete: Cascade)
  @@unique([tenantId, leadId, snaphotDate])
  @@index([tenantId, leadId])
  @@index([tenantId, firstTouchBucket])
  @@index([tenantId, lastTouchBucket])
  @@index([tenantId, conversionBucket])
  @@index([tenantId, isConverted])
  @@index([snaphotDate])
  @@map("lead_attribution_snapshot")
}
model AttributionRule {
  id                    String                @id @db.Char(36)
  tenantId              String                @db.VarChar(36) @map("tenant_id")
  ruleName              String                @db.VarChar(255) @map("rule_name")
  description           String?               @db.Text
  ruleType              String                @db.VarChar(50) @map("rule_type") // first_touch, last_touch, linear, position_based, time_decay, custom
  conditions            String?               @db.LongText // JSON: {bucket: "SEO", excludeTest: true, ...}
  isActive              Boolean               @default(true) @map("is_active")
  priority              Int                   @default(0) // Higher = evaluated first
  createdBy             String?               @db.VarChar(36) @map("created_by")
  createdAt             DateTime              @default(now()) @map("created_at")
  updatedAt             DateTime              @updatedAt @map("updated_at")
  @@index([tenantId, isActive])
  @@map("attribution_rule")
}
model AttributionExclusion {
  id                    String                @id @db.Char(36)
  tenantId              String                @db.VarChar(36) @map("tenant_id")
  exclusionType         String                @db.VarChar(100) @map("exclusion_type") // bot, test, internal, spam, duplicate
  exclusionName         String                @db.VarChar(255) @map("exclusion_name")
  description           String?               @db.Text
  matchType             String                @db.VarChar(50) @map("match_type") // exact, contains, regex, ip_range
  matchValue            String                @db.VarChar(500) @map("match_value")
  field                 String                @db.VarChar(100) // user_agent, ip_address, keyword, etc
  isActive              Boolean               @default(true) @map("is_active")
  appliedCount          Int                   @default(0) @map("applied_count")
  lastAppliedDate       DateTime?             @map("last_applied_date")
  createdAt             DateTime              @default(now()) @map("created_at")
  @@index([tenantId, field])
  @@index([tenantId, isActive])
  @@map("attribution_exclusion")
}
model AttributionMetric {
  id                    String                @id @db.Char(36)
  tenantId              String                @db.VarChar(36) @map("tenant_id")
  metricDate            DateTime              @map("metric_date") @db.Date
  bucket                AttributionBucket     @map("bucket")
  totalEvents           Int                   @map("total_events")
  uniqueLeads           Int                   @map("unique_leads")
  uniqueVisitors        Int                   @map("unique_visitors")
  conversions           Int
  conversionRate        Decimal               @db.Decimal(5, 4) @map("conversion_rate") // percentage as 0.0523
  avgTouchesPerLead     Decimal               @db.Decimal(5, 2) @map("avg_touches_per_lead")
  totalSpend            Decimal?              @db.Decimal(15, 2) @map("total_spend")
  totalRevenue          Decimal?              @db.Decimal(15, 2) @map("total_revenue")
  roi                   Decimal?              @db.Decimal(8, 2) @map("roi") // percentage
  dataQuality           String                @db.VarChar(50) @map("data_quality") // complete, partial, estimated
  lastUpdated           DateTime              @map("last_updated") @db.DateTime
  @@unique([tenantId, metricDate, bucket])
  @@index([tenantId, metricDate])
  @@index([tenantId, bucket])
  @@map("attribution_metric")
}
model AttributionAuditLog {
  id                    String                @id @db.Char(36)
  tenantId              String                @db.VarChar(36) @map("tenant_id")
  action                String                @db.VarChar(100) // event_created, rule_changed, bucket_updated, etc
  entityType            String                @db.VarChar(100) @map("entity_type") // AttributionEvent, AttributionRule, etc
  entityId              String?               @db.VarChar(36) @map("entity_id")
  oldValue              String?               @db.LongText @map("old_value") // JSON
  newValue              String?               @db.LongText @map("new_value") // JSON
  userId                String?               @db.VarChar(36) @map("user_id")
  ipAddress             String?               @db.VarChar(45) @map("ip_address")
  createdAt             DateTime              @default(now()) @map("created_at")
  @@index([tenantId, action])
  @@index([tenantId, entityType])
  @@index([tenantId, createdAt])
  @@map("attribution_audit_log")
}
model TenantUserCount {
  id                      String    @id @db.Char(36)
  tenantId                String    @unique @db.Char(36) @map("tenant_id")
  totalActiveUsers        Int       @default(0) @map("total_active_users")
  totalInactiveUsers      Int       @default(0) @map("total_inactive_users")
  totalSuspendedUsers     Int       @default(0) @map("total_suspended_users")
  totalUsers              Int       @default(0) @map("total_users") // Sum of all
  maxUsersAllowed         Int       @default(100) @map("max_users_allowed")
  isOverLimit             Boolean   @default(false) @map("is_over_limit")
  overageCount            Int       @default(0) @map("overage_count") // totalUsers - maxUsersAllowed
  seatUtilization         Decimal   @default(0) @db.Decimal(5, 2) @map("seat_utilization") // percentage
  seatsRemaining          Int       @default(0) @map("seats_remaining")
  adminUsers              Int       @default(0) @map("admin_users")
  managerUsers            Int       @default(0) @map("manager_users")
  standardUsers           Int       @default(0) @map("standard_users")
  guestUsers              Int       @default(0) @map("guest_users")
  lastCountedAt           DateTime  @map("last_counted_at")
  lastOverageAlertSent    DateTime? @map("last_overage_alert_sent")
  createdAt               DateTime  @default(now()) @map("created_at")
  updatedAt               DateTime  @updatedAt @map("updated_at")
  tenant                  Tenant    @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  userCountHistory        TenantUserCountHistory[]
  @@index([tenantId])
  @@index([isOverLimit])
  @@map("tenant_user_count")
}
model TenantUserCountHistory {
  id                      String    @id @db.Char(36)
  tenantId                String    @db.Char(36) @map("tenant_id")
  userCountId             String    @db.Char(36) @map("user_count_id")
  userCount               TenantUserCount @relation(fields: [userCountId], references: [id], onDelete: Cascade)
  snapshotDate            DateTime  @db.Date @map("snapshot_date")
  activeUserCount         Int       @map("active_user_count")
  inactiveUserCount       Int       @map("inactive_user_count")
  suspendedUserCount      Int       @map("suspended_user_count")
  totalUserCount          Int       @map("total_user_count")
  billableUserCount       Int       @map("billable_user_count") // Users billable this period
  peakConcurrentUsers     Int?      @map("peak_concurrent_users") // Max users online same time
  newUsersAdded           Int       @default(0) @map("new_users_added")
  usersRemoved            Int       @default(0) @map("users_removed")
  usersReactivated        Int       @default(0) @map("users_reactivated")
  usersSuspended          Int       @default(0) @map("users_suspended")
  currentPlan             String?   @db.VarChar(100) @map("current_plan") // "starter", "pro", "enterprise", etc
  maxAllowedUsers         Int       @map("max_allowed_users")
  isOverLimit             Boolean   @default(false) @map("is_over_limit")
  overageChargeApplied    Boolean   @default(false) @map("overage_charge_applied")
  recordedAt              DateTime  @default(now()) @map("recorded_at")
  recordedBy              String?   @db.VarChar(100) @map("recorded_by") // "system", "manual", etc
  notes                   String?   @db.Text
  @@unique([userCountId, snapshotDate])
  @@index([tenantId])
  @@index([snapshotDate])
  @@map("tenant_user_count_history")
}
model UserActivityLog {
  id                      String    @id @db.Char(36)
  userId                  String    @db.Char(36) @map("user_id")
  tenantId                String    @db.Char(36) @map("tenant_id")
  activityType            String    @db.VarChar(50) @map("activity_type") // "LOGIN", "LOGOUT", "SESSION_START", "SESSION_END", "IDLE", "ACTIVE"
  activityTimestamp       DateTime  @map("activity_timestamp")
  sessionDurationSeconds  Int?      @map("session_duration_seconds")
  sessionId               String?   @db.VarChar(255) @map("session_id")
  ipAddress               String?   @db.VarChar(45) @map("ip_address")
  userAgent               String?   @db.Text @map("user_agent")
  deviceType              String?   @db.VarChar(50) @map("device_type") // "DESKTOP", "MOBILE", "TABLET"
  country                 String?   @db.VarChar(100)
  state                   String?   @db.VarChar(100)
  city                    String?   @db.VarChar(100)
  createdAt               DateTime  @default(now()) @map("created_at")
  @@index([userId])
  @@index([tenantId])
  @@index([activityTimestamp])
  @@index([activityType])
  @@map("user_activity_log")
}

model Vendor {
  id                        String   @id @db.Char(36)
  tenantId                  String   @db.VarChar(36) @map("tenant_id")
  vendorCode                String   @unique @db.VarChar(50) @map("vendor_code")
  name                      String   @db.VarChar(255)
  email                     String?  @db.VarChar(255)
  phone                     String?  @db.VarChar(20)
  address                   String?  @db.Text
  city                      String?  @db.VarChar(100)
  state                     String?  @db.VarChar(100)
  country                   String?  @db.VarChar(100)
  postalCode                String?  @db.VarChar(20) @map("postal_code")
  taxId                     String?  @db.VarChar(50) @map("tax_id")
  paymentTerms              String?  @db.VarChar(100) @map("payment_terms")
  vendorType                String?  @db.VarChar(50) @map("vendor_type")
  rating                    Decimal? @db.Decimal(3, 1)
  isActive                  Boolean  @default(true) @map("is_active")
  isBlocked                 Boolean  @default(false) @map("is_blocked")
  status                    String   @default("active") @db.VarChar(50)
  createdBy                 String?  @db.VarChar(36) @map("created_by")
  glVendorPayableAccountId  String?  @db.VarChar(36) @map("gl_vendor_payable_account_id")
  createdAt                 DateTime @default(now()) @map("created_at")
  updatedAt                 DateTime @updatedAt @map("updated_at")
  vendorContacts            VendorContact[]
  vendorAddresses           VendorAddress[]
  purchaseOrders            PurchaseOrder[]
  inventoryItemVendors      InventoryItemVendor[]
  vendorInvoices            VendorInvoice[]
  @@index([tenantId])
  @@index([vendorCode])
  @@index([status])
  @@map("vendor")
}
model VendorContact {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  vendorId          String   @db.VarChar(36) @map("vendor_id")
  name              String   @db.VarChar(100)
  title             String?  @db.VarChar(100)
  phone             String?  @db.VarChar(20)
  email             String?  @db.VarChar(255)
  isPrimary         Boolean  @default(false) @map("is_primary")
  createdAt         DateTime @default(now()) @map("created_at")
  vendor            Vendor   @relation(fields: [vendorId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@index([vendorId])
  @@map("vendor_contact")
}
model VendorAddress {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  vendorId          String   @db.VarChar(36) @map("vendor_id")
  type              String?  @db.VarChar(50)
  line1             String?  @db.VarChar(255)
  line2             String?  @db.VarChar(255)
  city              String?  @db.VarChar(100)
  state             String?  @db.VarChar(100)
  country           String?  @db.VarChar(100)
  postCode          String?  @db.VarChar(20) @map("post_code")
  isPrimary         Boolean  @default(false) @map("is_primary")
  createdAt         DateTime @default(now()) @map("created_at")
  vendor            Vendor   @relation(fields: [vendorId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@index([vendorId])
  @@map("vendor_address")
}
model PurchaseRequisition {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  requisitionNumber String   @unique @db.VarChar(50) @map("requisition_number")
  requesterId       String?  @db.VarChar(36) @map("requester_id")
  department        String?  @db.VarChar(100)
  requestDate       DateTime @map("request_date") @db.Date
  requiredByDate    DateTime? @map("required_by_date") @db.Date
  purpose           String?  @db.Text
  status            String   @default("draft") @db.VarChar(50)
  approvedBy        String?  @db.VarChar(36) @map("approved_by")
  approvedAt        DateTime? @map("approved_at")
  rejectionReason   String?  @db.Text @map("rejection_reason")
  createdBy         String?  @db.VarChar(36) @map("created_by")
  createdAt         DateTime @default(now()) @map("created_at")
  updatedAt         DateTime @updatedAt @map("updated_at")
  purchaseOrders    PurchaseOrder[]
  @@index([tenantId])
  @@index([requisitionNumber])
  @@index([status])
  @@map("purchase_requisition")
}
model PurchaseOrder {
  id                      String   @id @db.Char(36)
  tenantId                String   @db.VarChar(36) @map("tenant_id")
  poNumber                String   @unique @db.VarChar(50) @map("po_number")
  vendorId                String   @db.VarChar(36) @map("vendor_id")
  requisitionId           String?  @db.VarChar(36) @map("requisition_id")
  poDate                  DateTime @map("po_date") @db.Date
  deliveryDate            DateTime? @map("delivery_date") @db.Date
  totalAmount             Decimal? @db.Decimal(18, 2) @map("total_amount")
  taxAmount               Decimal  @default(0) @db.Decimal(18, 2) @map("tax_amount")
  shippingAmount          Decimal  @default(0) @db.Decimal(18, 2) @map("shipping_amount")
  discountAmount          Decimal  @default(0) @db.Decimal(18, 2) @map("discount_amount")
  netAmount               Decimal? @db.Decimal(18, 2) @map("net_amount")
  paymentTerms            String?  @db.VarChar(100) @map("payment_terms")
  deliveryLocation        String?  @db.VarChar(255) @map("delivery_location")
  specialInstructions     String?  @db.Text @map("special_instructions")
  status                  String   @default("draft") @db.VarChar(50)
  sentToVendorAt          DateTime? @map("sent_to_vendor_at")
  acknowledgedAt          DateTime? @map("acknowledged_at")
  createdBy               String?  @db.VarChar(36) @map("created_by")
  glInventoryAccountId    String?  @db.VarChar(36) @map("gl_inventory_account_id")
  glExpenseAccountId      String?  @db.VarChar(36) @map("gl_expense_account_id")
  createdAt               DateTime @default(now()) @map("created_at")
  updatedAt               DateTime @updatedAt @map("updated_at")
  vendor                  Vendor   @relation(fields: [vendorId], references: [id])
  requisition             PurchaseRequisition? @relation(fields: [requisitionId], references: [id])
  poLineItems             PoLineItem[]
  goodsReceipts           GoodsReceipt[]
  inventoryBatches        InventoryBatch[]
  @@index([tenantId])
  @@index([poNumber])
  @@index([vendorId])
  @@index([status])
  @@map("purchase_order")
}
model PoLineItem {
  id                      String   @id @db.Char(36)
  tenantId                String   @db.VarChar(36) @map("tenant_id")
  poId                    String   @db.VarChar(36) @map("po_id")
  inventoryItemId         String?  @db.VarChar(36) @map("inventory_item_id")
  description             String?  @db.VarChar(500)
  quantity                Decimal  @db.Decimal(18, 4)
  unitPrice               Decimal  @db.Decimal(18, 4) @map("unit_price")
  lineAmount              Decimal  @db.Decimal(18, 2) @map("line_amount")
  taxPercent              Decimal  @default(0) @db.Decimal(5, 2) @map("tax_percent")
  taxAmount               Decimal  @default(0) @db.Decimal(18, 2) @map("tax_amount")
  lineTotal               Decimal  @db.Decimal(18, 2) @map("line_total")
  deliveryDate            DateTime? @map("delivery_date") @db.Date
  quantityReceived        Decimal  @default(0) @db.Decimal(18, 4) @map("quantity_received")
  quantityInvoiced        Decimal  @default(0) @db.Decimal(18, 4) @map("quantity_invoiced")
  status                  String   @default("pending") @db.VarChar(50)
  createdAt               DateTime @default(now()) @map("created_at")
  po                      PurchaseOrder @relation(fields: [poId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@index([poId])
  @@map("po_line_item")
}
model GoodsReceipt {
  id                      String   @id @db.Char(36)
  tenantId                String   @db.VarChar(36) @map("tenant_id")
  grnNumber               String   @unique @db.VarChar(50) @map("grn_number")
  poId                    String   @db.VarChar(36) @map("po_id")
  vendorId                String?  @db.VarChar(36) @map("vendor_id")
  receiptDate             DateTime @map("receipt_date") @db.Date
  warehouseId             String?  @db.VarChar(36) @map("warehouse_id")
  receivedBy              String?  @db.VarChar(36) @map("received_by")
  inspectionStatus        String?  @db.VarChar(50) @map("inspection_status")
  acceptanceStatus        String   @default("pending") @db.VarChar(50) @map("acceptance_status")
  notes                   String?  @db.Text
  referenceNumber         String?  @db.VarChar(100) @map("reference_number")
  createdAt               DateTime @default(now()) @map("created_at")
  updatedAt               DateTime @updatedAt @map("updated_at")
  po                      PurchaseOrder @relation(fields: [poId], references: [id])
  grnLineItems            GrnLineItem[]
  @@index([tenantId])
  @@index([grnNumber])
  @@index([poId])
  @@map("goods_receipt")
}
model GrnLineItem {
  id                      String   @id @db.Char(36)
  tenantId                String   @db.VarChar(36) @map("tenant_id")
  grnId                   String   @db.VarChar(36) @map("grn_id")
  poLineItemId            String?  @db.VarChar(36) @map("po_line_item_id")
  inventoryItemId         String?  @db.VarChar(36) @map("inventory_item_id")
  quantityReceived        Decimal  @db.Decimal(18, 4) @map("quantity_received")
  quantityAccepted        Decimal  @default(0) @db.Decimal(18, 4) @map("quantity_accepted")
  quantityRejected        Decimal  @default(0) @db.Decimal(18, 4) @map("quantity_rejected")
  rejectionReason         String?  @db.Text @map("rejection_reason")
  batchNumber             String?  @db.VarChar(100) @map("batch_number")
  expiryDate              DateTime? @map("expiry_date") @db.Date
  serialNumbers           String?  @db.Text @map("serial_numbers")
  createdAt               DateTime @default(now()) @map("created_at")
  grn                     GoodsReceipt @relation(fields: [grnId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@index([grnId])
  @@map("grn_line_item")
}
model VendorInvoice {
  id                      String   @id @db.Char(36)
  tenantId                String   @db.VarChar(36) @map("tenant_id")
  vendorId                String   @db.VarChar(36) @map("vendor_id")
  invoiceNumber           String   @db.VarChar(100) @map("invoice_number")
  invoiceDate             DateTime @map("invoice_date") @db.Date
  dueDate                 DateTime? @map("due_date") @db.Date
  totalAmount             Decimal  @db.Decimal(18, 2) @map("total_amount")
  taxAmount               Decimal  @default(0) @db.Decimal(18, 2) @map("tax_amount")
  discountAmount          Decimal  @default(0) @db.Decimal(18, 2) @map("discount_amount")
  payableAmount           Decimal  @db.Decimal(18, 2) @map("payable_amount")
  currency                String   @default("USD") @db.VarChar(3)
  status                  String   @default("draft") @db.VarChar(50) // draft, submitted, approved, rejected, paid, cancelled
  description             String?  @db.Text
  notes                   String?  @db.Text
  attachments             String?  @db.Text // JSON array of file references
  createdAt               DateTime @default(now()) @map("created_at")
  updatedAt               DateTime @updatedAt @map("updated_at")
  vendor                  Vendor   @relation(fields: [vendorId], references: [id], onDelete: Restrict)
  @@unique([tenantId, invoiceNumber])
  @@index([tenantId])
  @@index([vendorId])
  @@index([invoiceDate])
  @@map("vendor_invoice")
}

model Warehouse {
  id                      String   @id @db.Char(36)
  tenantId                String   @db.VarChar(36) @map("tenant_id")
  warehouseCode           String   @db.VarChar(50) @map("warehouse_code")
  warehouseName           String   @db.VarChar(255) @map("warehouse_name")
  warehouseType           String?  @db.VarChar(50) @map("warehouse_type")
  address                 String?  @db.Text
  city                    String?  @db.VarChar(100)
  state                   String?  @db.VarChar(100)
  country                 String?  @db.VarChar(100)
  postalCode              String?  @db.VarChar(20) @map("postal_code")
  managerId               String?  @db.VarChar(36) @map("manager_id")
  capacity                Decimal? @db.Decimal(18, 2)
  currentUtilization      Decimal  @default(0) @db.Decimal(18, 2) @map("current_utilization")
  isActive                Boolean  @default(true) @map("is_active")
  glInventoryAccountId    String?  @db.VarChar(36) @map("gl_inventory_account_id")
  createdBy               String?  @db.VarChar(36) @map("created_by")
  createdAt               DateTime @default(now()) @map("created_at")
  updatedAt               DateTime @updatedAt @map("updated_at")
  stockLevels             StockLevel[]
  stockMovements          StockMovement[]
  @@unique([tenantId, warehouseCode])
  @@index([tenantId])
  @@index([warehouseCode])
  @@index([isActive])
  @@map("warehouse")
}
model InventoryItem {
  id                      String   @id @db.Char(36)
  tenantId                String   @db.VarChar(36) @map("tenant_id")
  sku                     String   @db.VarChar(50)
  itemName                String   @db.VarChar(255) @map("item_name")
  itemDescription         String?  @db.Text @map("item_description")
  itemCategory            String?  @db.VarChar(100) @map("item_category")
  itemType                String?  @db.VarChar(50) @map("item_type")
  unitOfMeasure           String?  @db.VarChar(20) @map("unit_of_measure")
  reorderLevel            Decimal? @db.Decimal(18, 4) @map("reorder_level")
  reorderQuantity         Decimal? @db.Decimal(18, 4) @map("reorder_quantity")
  safetyStock             Decimal? @db.Decimal(18, 4) @map("safety_stock")
  leadTimeDays            Int?     @map("lead_time_days")
  hsnCode                 String?  @db.VarChar(50) @map("hsn_code")
  isSerialized            Boolean  @default(false) @map("is_serialized")
  isBatchTracked          Boolean  @default(false) @map("is_batch_tracked")
  itemStatus              String   @default("active") @db.VarChar(50) @map("item_status")
  glInventoryAccountId    String?  @db.VarChar(36) @map("gl_inventory_account_id")
  glExpenseAccountId      String?  @db.VarChar(36) @map("gl_expense_account_id")
  createdBy               String?  @db.VarChar(36) @map("created_by")
  createdAt               DateTime @default(now()) @map("created_at")
  updatedAt               DateTime @updatedAt @map("updated_at")
  itemVendors             InventoryItemVendor[]
  stockLevels             StockLevel[]
  stockMovements          StockMovement[]
  inventoryBatches        InventoryBatch[]
  inventorySerials        InventorySerial[]
  stockAdjustmentLines    StockAdjustmentLine[]
  physicalInventoryDetails PhysicalInventoryDetail[]
  @@unique([tenantId, sku])
  @@index([tenantId])
  @@index([sku])
  @@index([itemCategory])
  @@index([itemStatus])
  @@map("inventory_item")
}
model InventoryItemVendor {
  id                      String   @id @db.Char(36)
  tenantId                String   @db.VarChar(36) @map("tenant_id")
  inventoryItemId         String   @db.VarChar(36) @map("inventory_item_id")
  vendorId                String   @db.VarChar(36) @map("vendor_id")
  vendorSku               String?  @db.VarChar(50) @map("vendor_sku")
  vendorPartNumber        String?  @db.VarChar(100) @map("vendor_part_number")
  leadTimeDays            Int?     @map("lead_time_days")
  minimumOrderQuantity    Decimal? @db.Decimal(18, 4) @map("minimum_order_quantity")
  unitPrice               Decimal? @db.Decimal(18, 4) @map("unit_price")
  lastPriceDate           DateTime? @map("last_price_date") @db.Date
  preferredVendor         Boolean  @default(false) @map("preferred_vendor")
  qualityRating           Decimal? @db.Decimal(3, 1) @map("quality_rating")
  isActive                Boolean  @default(true) @map("is_active")
  createdAt               DateTime @default(now()) @map("created_at")
  inventoryItem           InventoryItem @relation(fields: [inventoryItemId], references: [id], onDelete: Cascade)
  vendor                  Vendor   @relation(fields: [vendorId], references: [id], onDelete: Cascade)
  @@unique([inventoryItemId, vendorId])
  @@index([tenantId])
  @@index([inventoryItemId])
  @@index([vendorId])
  @@map("inventory_item_vendor")
}
model StockLevel {
  id                      String   @id @db.Char(36)
  tenantId                String   @db.VarChar(36) @map("tenant_id")
  inventoryItemId         String   @db.VarChar(36) @map("inventory_item_id")
  warehouseId             String   @db.VarChar(36) @map("warehouse_id")
  quantityOnHand          Decimal  @default(0) @db.Decimal(18, 4) @map("quantity_on_hand")
  quantityReserved        Decimal  @default(0) @db.Decimal(18, 4) @map("quantity_reserved")
  quantityAvailable       Decimal  @default(0) @db.Decimal(18, 4) @map("quantity_available")
  quantityInTransit       Decimal  @default(0) @db.Decimal(18, 4) @map("quantity_in_transit")
  lastCountedDate         DateTime? @map("last_counted_date") @db.Date
  recountRequired         Boolean  @default(false) @map("recount_required")
  createdAt               DateTime @default(now()) @map("created_at")
  updatedAt               DateTime @updatedAt @map("updated_at")
  inventoryItem           InventoryItem @relation(fields: [inventoryItemId], references: [id], onDelete: Cascade)
  warehouse               Warehouse @relation(fields: [warehouseId], references: [id], onDelete: Cascade)
  importLineItems         ImportHSCodeLineItem[]
  @@unique([inventoryItemId, warehouseId])
  @@index([tenantId])
  @@index([inventoryItemId])
  @@index([warehouseId])
  @@index([recountRequired])
  @@map("stock_level")
}
model StockMovement {
  id                      String   @id @db.Char(36)
  tenantId                String   @db.VarChar(36) @map("tenant_id")
  inventoryItemId         String   @db.VarChar(36) @map("inventory_item_id")
  warehouseId             String   @db.VarChar(36) @map("warehouse_id")
  movementType            String?  @db.VarChar(50) @map("movement_type")
  movementDate            DateTime @map("movement_date") @db.Date
  quantityChange          Decimal? @db.Decimal(18, 4) @map("quantity_change")
  referenceType           String?  @db.VarChar(50) @map("reference_type")
  referenceId             String?  @db.VarChar(36) @map("reference_id")
  fromLocation            String?  @db.VarChar(100) @map("from_location")
  toLocation              String?  @db.VarChar(100) @map("to_location")
  batchNumber             String?  @db.VarChar(100) @map("batch_number")
  serialNumbers           String?  @db.Text @map("serial_numbers")
  unitPrice               Decimal? @db.Decimal(18, 4) @map("unit_price")
  totalValue              Decimal? @db.Decimal(18, 2) @map("total_value")
  reasonCode              String?  @db.VarChar(50) @map("reason_code")
  notes                   String?  @db.Text
  createdBy               String?  @db.VarChar(36) @map("created_by")
  createdAt               DateTime @default(now()) @map("created_at")
  inventoryItem           InventoryItem @relation(fields: [inventoryItemId], references: [id], onDelete: Cascade)
  warehouse               Warehouse @relation(fields: [warehouseId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@index([inventoryItemId])
  @@index([warehouseId])
  @@index([movementDate])
  @@index([movementType])
  @@index([referenceId])
  @@map("stock_movement")
}
model InventoryBatch {
  id                      String   @id @db.Char(36)
  tenantId                String   @db.VarChar(36) @map("tenant_id")
  inventoryItemId         String   @db.VarChar(36) @map("inventory_item_id")
  batchNumber             String   @db.VarChar(100) @map("batch_number")
  manufactureDate         DateTime? @map("manufacture_date") @db.Date
  expiryDate              DateTime? @map("expiry_date") @db.Date
  quantityReceived        Decimal? @db.Decimal(18, 4) @map("quantity_received")
  quantityRemaining       Decimal? @db.Decimal(18, 4) @map("quantity_remaining")
  purchaseOrderId         String?  @db.VarChar(36) @map("purchase_order_id")
  supplierBatchNumber     String?  @db.VarChar(100) @map("supplier_batch_number")
  qualityStatus           String?  @db.VarChar(50) @map("quality_status")
  storageLocation         String?  @db.VarChar(100) @map("storage_location")
  createdAt               DateTime @default(now()) @map("created_at")
  updatedAt               DateTime @updatedAt @map("updated_at")
  inventoryItem           InventoryItem @relation(fields: [inventoryItemId], references: [id], onDelete: Cascade)
  po                      PurchaseOrder? @relation(fields: [purchaseOrderId], references: [id])
  @@unique([tenantId, batchNumber])
  @@index([tenantId])
  @@index([inventoryItemId])
  @@index([batchNumber])
  @@index([expiryDate])
  @@index([qualityStatus])
  @@map("inventory_batch")
}
model InventorySerial {
  id                      String   @id @db.Char(36)
  tenantId                String   @db.VarChar(36) @map("tenant_id")
  inventoryItemId         String   @db.VarChar(36) @map("inventory_item_id")
  serialNumber            String   @unique @db.VarChar(100) @map("serial_number")
  batchId                 String?  @db.VarChar(36) @map("batch_id")
  purchaseOrderId         String?  @db.VarChar(36) @map("purchase_order_id")
  warrantyStartDate       DateTime? @map("warranty_start_date") @db.Date
  warrantyEndDate         DateTime? @map("warranty_end_date") @db.Date
  currentLocation         String?  @db.VarChar(100) @map("current_location")
  status                  String   @default("in_stock") @db.VarChar(50)
  createdAt               DateTime @default(now()) @map("created_at")
  updatedAt               DateTime @updatedAt @map("updated_at")
  inventoryItem           InventoryItem @relation(fields: [inventoryItemId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@index([inventoryItemId])
  @@index([serialNumber])
  @@map("inventory_serial")
}
model InventoryValuation {
  id                      String   @id @db.Char(36)
  tenantId                String   @db.VarChar(36) @map("tenant_id")
  inventoryItemId         String   @db.VarChar(36) @map("inventory_item_id")
  warehouseId             String   @db.VarChar(36) @map("warehouse_id")
  valuationDate           DateTime @map("valuation_date") @db.Date
  valuationMethod         String   @db.VarChar(50) @map("valuation_method")
  quantityOnHand          Decimal  @db.Decimal(18, 4) @map("quantity_on_hand")
  unitPrice               Decimal  @db.Decimal(18, 4) @map("unit_price")
  totalValue              Decimal  @db.Decimal(18, 2) @map("total_value")
  notes                   String?  @db.Text
  createdBy               String?  @db.VarChar(36) @map("created_by")
  createdAt               DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@index([inventoryItemId])
  @@map("inventory_valuation")
}
model StockAdjustment {
  id                      String   @id @db.Char(36)
  tenantId                String   @db.VarChar(36) @map("tenant_id")
  adjustmentNumber        String   @unique @db.VarChar(50) @map("adjustment_number")
  adjustmentDate          DateTime @map("adjustment_date") @db.Date
  reason                  String?  @db.VarChar(100)
  status                  String   @default("draft") @db.VarChar(50)
  approvedBy              String?  @db.VarChar(36) @map("approved_by")
  approvalDate            DateTime? @map("approval_date")
  notes                   String?  @db.Text
  createdBy               String?  @db.VarChar(36) @map("created_by")
  createdAt               DateTime @default(now()) @map("created_at")
  updatedAt               DateTime @updatedAt @map("updated_at")
  lineItems               StockAdjustmentLine[]
  @@index([tenantId])
  @@index([adjustmentNumber])
  @@index([status])
  @@map("stock_adjustment")
}
model StockAdjustmentLine {
  id                      String   @id @db.Char(36)
  tenantId                String   @db.VarChar(36) @map("tenant_id")
  adjustmentId            String   @db.VarChar(36) @map("adjustment_id")
  inventoryItemId         String   @db.VarChar(36) @map("inventory_item_id")
  warehouseId             String   @db.VarChar(36) @map("warehouse_id")
  quantityVariance        Decimal  @db.Decimal(18, 4) @map("quantity_variance")
  reason                  String?  @db.VarChar(100)
  createdAt               DateTime @default(now()) @map("created_at")
  adjustment              StockAdjustment @relation(fields: [adjustmentId], references: [id], onDelete: Cascade)
  inventoryItem           InventoryItem @relation(fields: [inventoryItemId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@index([adjustmentId])
  @@map("stock_adjustment_line")
}
model PhysicalInventory {
  id                      String   @id @db.Char(36)
  tenantId                String   @db.VarChar(36) @map("tenant_id")
  inventoryNumber         String   @unique @db.VarChar(50) @map("inventory_number")
  warehouseId             String?  @db.VarChar(36) @map("warehouse_id")
  countDate               DateTime @map("count_date") @db.Date
  status                  String   @default("draft") @db.VarChar(50)
  countersNames           String?  @db.Text @map("counters_names")
  completionPercentage    Decimal  @default(0) @db.Decimal(5, 2) @map("completion_percentage")
  notes                   String?  @db.Text
  startedBy               String?  @db.VarChar(36) @map("started_by")
  completedBy             String?  @db.VarChar(36) @map("completed_by")
  completedAt             DateTime? @map("completed_at")
  createdAt               DateTime @default(now()) @map("created_at")
  updatedAt               DateTime @updatedAt @map("updated_at")
  details                 PhysicalInventoryDetail[]
  @@index([tenantId])
  @@index([inventoryNumber])
  @@index([status])
  @@map("physical_inventory")
}
model PhysicalInventoryDetail {
  id                      String   @id @db.Char(36)
  tenantId                String   @db.VarChar(36) @map("tenant_id")
  physicalInventoryId     String   @db.VarChar(36) @map("physical_inventory_id")
  inventoryItemId         String   @db.VarChar(36) @map("inventory_item_id")
  quantityExpected        Decimal? @db.Decimal(18, 4) @map("quantity_expected")
  quantityCounted         Decimal? @db.Decimal(18, 4) @map("quantity_counted")
  variance                Decimal? @db.Decimal(18, 4)
  variancePercent         Decimal? @db.Decimal(5, 2) @map("variance_percent")
  notes                   String?  @db.Text
  createdAt               DateTime @default(now()) @map("created_at")
  physicalInventory       PhysicalInventory @relation(fields: [physicalInventoryId], references: [id], onDelete: Cascade)
  inventoryItem           InventoryItem @relation(fields: [inventoryItemId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@index([physicalInventoryId])
  @@map("physical_inventory_detail")
}
model InventoryTransfer {
  id                      String   @id @db.Char(36)
  tenantId                String   @db.VarChar(36) @map("tenant_id")
  transferNumber          String   @unique @db.VarChar(50) @map("transfer_number")
  fromWarehouseId         String?  @db.VarChar(36) @map("from_warehouse_id")
  toWarehouseId           String?  @db.VarChar(36) @map("to_warehouse_id")
  transferDate            DateTime @map("transfer_date") @db.Date
  expectedDeliveryDate    DateTime? @map("expected_delivery_date") @db.Date
  actualDeliveryDate      DateTime? @map("actual_delivery_date") @db.Date
  status                  String   @default("draft") @db.VarChar(50)
  notes                   String?  @db.Text
  createdBy               String?  @db.VarChar(36) @map("created_by")
  createdAt               DateTime @default(now()) @map("created_at")
  updatedAt               DateTime @updatedAt @map("updated_at")
  lineItems               InventoryTransferLine[]
  @@index([tenantId])
  @@index([transferNumber])
  @@index([status])
  @@map("inventory_transfer")
}
model InventoryTransferLine {
  id                      String   @id @db.Char(36)
  tenantId                String   @db.VarChar(36) @map("tenant_id")
  transferId              String   @db.VarChar(36) @map("transfer_id")
  inventoryItemId         String   @db.VarChar(36) @map("inventory_item_id")
  quantityTransfered      Decimal  @db.Decimal(18, 4) @map("quantity_transfered")
  quantityReceived        Decimal  @default(0) @db.Decimal(18, 4) @map("quantity_received")
  quantityShortage        Decimal  @default(0) @db.Decimal(18, 4) @map("quantity_shortage")
  createdAt               DateTime @default(now()) @map("created_at")
  transfer                InventoryTransfer @relation(fields: [transferId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@index([transferId])
  @@map("inventory_transfer_line")
}
model MinStockAlert {
  id                      String   @id @db.Char(36)
  tenantId                String   @db.VarChar(36) @map("tenant_id")
  inventoryItemId         String   @db.VarChar(36) @map("inventory_item_id")
  warehouseId             String   @db.VarChar(36) @map("warehouse_id")
  minStockLevel           Decimal  @db.Decimal(18, 4) @map("min_stock_level")
  maxStockLevel           Decimal  @db.Decimal(18, 4) @map("max_stock_level")
  currentQuantity         Decimal? @db.Decimal(18, 4) @map("current_quantity")
  alertStatus             String   @db.VarChar(50) @map("alert_status")
  lastAlertDate           DateTime? @map("last_alert_date")
  createdAt               DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@index([alertStatus])
  @@map("min_stock_alert")
}
model InventoryDamage {
  id                      String   @id @db.Char(36)
  tenantId                String   @db.VarChar(36) @map("tenant_id")
  inventoryItemId         String   @db.VarChar(36) @map("inventory_item_id")
  warehouseId             String?  @db.VarChar(36) @map("warehouse_id")
  damageDate              DateTime @map("damage_date") @db.Date
  quantityDamaged         Decimal  @db.Decimal(18, 4) @map("quantity_damaged")
  damageReason            String?  @db.VarChar(255) @map("damage_reason")
  estimatedValue          Decimal? @db.Decimal(18, 2) @map("estimated_value")
  notes                   String?  @db.Text
  reportedBy              String?  @db.VarChar(36) @map("reported_by")
  createdAt               DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@index([damageDate])
  @@map("inventory_damage")
}

model Role {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  roleName          String   @db.VarChar(100) @map("role_name")
  description       String?  @db.Text
  isSystemRole      Boolean  @default(false) @map("is_system_role")
  isActive          Boolean  @default(true) @map("is_active")
  createdAt         DateTime @default(now()) @map("created_at")
  updatedAt         DateTime @updatedAt @map("updated_at")
  permissions       RolePermission[]
  userRoles         UserRole[]
  roleDelegations   RoleDelegation[]
  @@unique([tenantId, roleName])
  @@index([tenantId])
  @@map("role")
}
model Permission {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  permissionName    String   @db.VarChar(100) @map("permission_name")
  description       String?  @db.Text
  resource          String?  @db.VarChar(100)
  action            String?  @db.VarChar(50)
  isSystemPermission Boolean @default(false) @map("is_system_permission")
  createdAt         DateTime @default(now()) @map("created_at")
  updatedAt         DateTime @updatedAt @map("updated_at")
  roles             RolePermission[]
  fieldPermissions  FieldLevelPermission[]
  @@unique([tenantId, permissionName])
  @@index([tenantId])
  @@index([resource])
  @@map("permission")
}
model RolePermission {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  roleId            String   @db.VarChar(36) @map("role_id")
  permissionId      String   @db.VarChar(36) @map("permission_id")
  createdAt         DateTime @default(now()) @map("created_at")
  role              Role     @relation(fields: [roleId], references: [id], onDelete: Cascade)
  permission        Permission @relation(fields: [permissionId], references: [id], onDelete: Cascade)
  @@unique([roleId, permissionId])
  @@index([tenantId])
  @@index([roleId])
  @@index([permissionId])
  @@map("role_permission")
}
model UserRole {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  userId            String   @db.Char(36) @map("user_id")
  roleId            String   @db.VarChar(36) @map("role_id")
  assignedAt        DateTime @default(now()) @map("assigned_at")
  assignedBy        String?  @db.VarChar(36) @map("assigned_by")
  expiresAt         DateTime? @map("expires_at")
  createdAt         DateTime @default(now()) @map("created_at")
  user              User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  role              Role     @relation(fields: [roleId], references: [id], onDelete: Cascade)
  @@unique([userId, roleId])
  @@index([tenantId])
  @@index([userId])
  @@index([roleId])
  @@map("user_role")
}
model Resource {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  resourceName      String   @db.VarChar(100) @map("resource_name")
  resourceType      String?  @db.VarChar(50) @map("resource_type")
  endpoint          String?  @db.VarChar(255)
  description       String?  @db.Text
  isProtected       Boolean  @default(true) @map("is_protected")
  createdAt         DateTime @default(now()) @map("created_at")
  accessLogs        AccessLog[]
  resourceAccesses  ResourceAccess[]
  @@index([tenantId])
  @@index([resourceType])
  @@map("resource")
}
model AccessLog {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  userId            String?  @db.Char(36) @map("user_id")
  resourceId        String?  @db.VarChar(36) @map("resource_id")
  action            String?  @db.VarChar(50)
  status            String?  @db.VarChar(50)
  ipAddress         String?  @db.VarChar(45) @map("ip_address")
  userAgent         String?  @db.Text @map("user_agent")
  timestamp         DateTime @default(now())
  user              User?    @relation(fields: [userId], references: [id], onDelete: SetNull)
  resource          Resource? @relation(fields: [resourceId], references: [id], onDelete: SetNull)
  @@index([tenantId])
  @@index([userId])
  @@index([timestamp])
  @@map("access_log")
}
model ResourceAccess {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  roleId            String   @db.VarChar(36) @map("role_id")
  resourceId        String   @db.VarChar(36) @map("resource_id")
  accessLevel       String?  @db.VarChar(50) @map("access_level")
  createdAt         DateTime @default(now()) @map("created_at")
  resource          Resource @relation(fields: [resourceId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@index([roleId])
  @@index([resourceId])
  @@map("resource_access")
}
model TimeBasedPermission {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  roleId            String   @db.VarChar(36) @map("role_id")
  validFrom         DateTime @map("valid_from")
  validTo           DateTime @map("valid_to")
  daysOfWeek        String?  @db.VarChar(50) @map("days_of_week")
  timeFrom          String?  @db.VarChar(10) @map("time_from")
  timeTo            String?  @db.VarChar(10) @map("time_to")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@index([roleId])
  @@map("time_based_permission")
}
model FieldLevelPermission {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  permissionId      String   @db.VarChar(36) @map("permission_id")
  entityName        String   @db.VarChar(100) @map("entity_name")
  fieldName         String   @db.VarChar(100) @map("field_name")
  accessType        String   @db.VarChar(50) @map("access_type")
  createdAt         DateTime @default(now()) @map("created_at")
  permission        Permission @relation(fields: [permissionId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@index([permissionId])
  @@map("field_level_permission")
}
model RoleDelegation {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  roleId            String   @db.VarChar(36) @map("role_id")
  delegatedTo       String   @db.Char(36) @map("delegated_to")
  delegatedBy       String   @db.Char(36) @map("delegated_by")
  validFrom         DateTime @map("valid_from")
  validTo           DateTime @map("valid_to")
  reason            String?  @db.Text
  createdAt         DateTime @default(now()) @map("created_at")
  role              Role     @relation(fields: [roleId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@index([roleId])
  @@map("role_delegation")
}
model BulkPermissionLog {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  batchNumber       String   @unique @db.VarChar(100) @map("batch_number")
  operation         String   @db.VarChar(50)
  roleIds           String?  @db.Text @map("role_ids")
  permissionIds     String?  @db.Text @map("permission_ids")
  status            String   @default("pending") @db.VarChar(50)
  totalAffected     Int      @map("total_affected")
  successCount      Int      @default(0) @map("success_count")
  failureCount      Int      @default(0) @map("failure_count")
  createdBy         String?  @db.VarChar(36) @map("created_by")
  completedAt       DateTime? @map("completed_at")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@index([status])
  @@map("bulk_permission_log")
}

model ChartOfAccount {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  accountCode       String   @unique @db.VarChar(50) @map("account_code")
  accountName       String   @db.VarChar(255) @map("account_name")
  accountType       String   @db.VarChar(50) @map("account_type")
  accountSubtype    String?  @db.VarChar(50) @map("account_subtype")
  description       String?  @db.Text
  balance           Decimal  @default(0) @db.Decimal(18, 2)
  parentAccountId   String?  @db.VarChar(36) @map("parent_account_id")
  isHeader          Boolean  @default(false) @map("is_header")
  isActive          Boolean  @default(true) @map("is_active")
  createdAt         DateTime @default(now()) @map("created_at")
  updatedAt         DateTime @updatedAt @map("updated_at")
  glPostingTemplatesAsSource GlPostingTemplate[] @relation("sourceAccount")
  glPostingTemplatesAsTarget GlPostingTemplate[] @relation("targetAccount")
  glPostingTemplatesAsDebit  GlPostingTemplate[] @relation("debitAccount")
  glPostingTemplatesAsCredit GlPostingTemplate[] @relation("creditAccount")
  journalEntryDetails JournalEntryDetail[]
  @@unique([tenantId, accountCode])
  @@index([tenantId])
  @@index([accountCode])
  @@index([accountType])
  @@map("chart_of_account")
}
model FinancialPeriod {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  periodName        String   @db.VarChar(100) @map("period_name")
  periodType        String   @db.VarChar(50) @map("period_type")
  startDate         DateTime @map("start_date") @db.Date
  endDate           DateTime @map("end_date") @db.Date
  isClosed          Boolean  @default(false) @map("is_closed")
  closedBy          String?  @db.VarChar(36) @map("closed_by")
  closedAt          DateTime? @map("closed_at")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@index([startDate, endDate])
  @@map("financial_period")
}
model JournalEntry {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  journalNumber     String   @unique @db.VarChar(50) @map("journal_number")
  entryDate         DateTime @map("entry_date") @db.Date
  description       String?  @db.Text
  referenceNumber   String?  @db.VarChar(100) @map("reference_number")
  referenceType     String?  @db.VarChar(50) @map("reference_type")
  totalDebit        Decimal  @default(0) @db.Decimal(18, 2) @map("total_debit")
  totalCredit       Decimal  @default(0) @db.Decimal(18, 2) @map("total_credit")
  status            String   @default("draft") @db.VarChar(50)
  approvedBy        String?  @db.VarChar(36) @map("approved_by")
  approvedAt        DateTime? @map("approved_at")
  postedBy          String?  @db.VarChar(36) @map("posted_by")
  postedAt          DateTime? @map("posted_at")
  createdBy         String?  @db.VarChar(36) @map("created_by")
  createdAt         DateTime @default(now()) @map("created_at")
  updatedAt         DateTime @updatedAt @map("updated_at")
  details           JournalEntryDetail[]
  @@index([tenantId])
  @@index([journalNumber])
  @@index([entryDate])
  @@index([status])
  @@map("journal_entry")
}
model JournalEntryDetail {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  journalEntryId    String   @db.VarChar(36) @map("journal_entry_id")
  accountId         String   @db.VarChar(36) @map("account_id")
  debitAmount       Decimal  @default(0) @db.Decimal(18, 2) @map("debit_amount")
  creditAmount      Decimal  @default(0) @db.Decimal(18, 2) @map("credit_amount")
  description       String?  @db.Text
  createdAt         DateTime @default(now()) @map("created_at")
  journalEntry      JournalEntry @relation(fields: [journalEntryId], references: [id], onDelete: Cascade)
  account           ChartOfAccount @relation(fields: [accountId], references: [id])
  @@index([tenantId])
  @@index([journalEntryId])
  @@index([accountId])
  @@map("journal_entry_detail")
}
model GlAccountBalance {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  accountId         String   @db.VarChar(36) @map("account_id")
  fiscalYear        Int      @map("fiscal_year")
  periodNumber      Int      @map("period_number")
  openingBalance    Decimal  @default(0) @db.Decimal(18, 2) @map("opening_balance")
  debitTotal        Decimal  @default(0) @db.Decimal(18, 2) @map("debit_total")
  creditTotal       Decimal  @default(0) @db.Decimal(18, 2) @map("credit_total")
  closingBalance    Decimal  @default(0) @db.Decimal(18, 2) @map("closing_balance")
  createdAt         DateTime @default(now()) @map("created_at")
  updatedAt         DateTime @updatedAt @map("updated_at")
  @@unique([tenantId, accountId, fiscalYear, periodNumber])
  @@index([tenantId])
  @@index([accountId])
  @@map("gl_account_balance")
}
model TrialBalance {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  trialBalanceDate  DateTime @map("trial_balance_date") @db.Date
  totalDebits       Decimal  @db.Decimal(18, 2) @map("total_debits")
  totalCredits      Decimal  @db.Decimal(18, 2) @map("total_credits")
  status            String   @db.VarChar(50)
  createdBy         String?  @db.VarChar(36) @map("created_by")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@index([trialBalanceDate])
  @@map("trial_balance")
}
model IncomeStatement {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  statementDate     DateTime @map("statement_date") @db.Date
  revenue           Decimal  @db.Decimal(18, 2)
  costOfSales       Decimal  @db.Decimal(18, 2) @map("cost_of_sales")
  grossProfit       Decimal  @db.Decimal(18, 2) @map("gross_profit")
  operatingExpenses Decimal  @db.Decimal(18, 2) @map("operating_expenses")
  operatingProfit   Decimal  @db.Decimal(18, 2) @map("operating_profit")
  netIncome         Decimal  @db.Decimal(18, 2) @map("net_income")
  createdBy         String?  @db.VarChar(36) @map("created_by")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("income_statement")
}
model BalanceSheet {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  sheetDate         DateTime @map("sheet_date") @db.Date
  totalAssets       Decimal  @db.Decimal(18, 2) @map("total_assets")
  totalLiabilities  Decimal  @db.Decimal(18, 2) @map("total_liabilities")
  totalEquity       Decimal  @db.Decimal(18, 2) @map("total_equity")
  createdBy         String?  @db.VarChar(36) @map("created_by")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("balance_sheet")
}
model GlPostingTemplate {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  templateName      String   @db.VarChar(255) @map("template_name")
  description       String?  @db.Text
  transactionType   String   @db.VarChar(50) @map("transaction_type")
  sourceAccountId   String   @db.VarChar(36) @map("source_account_id")
  targetAccountId   String   @db.VarChar(36) @map("target_account_id")
  debitAccountId    String   @db.VarChar(36) @map("debit_account_id")
  creditAccountId   String   @db.VarChar(36) @map("credit_account_id")
  isActive          Boolean  @default(true) @map("is_active")
  createdAt         DateTime @default(now()) @map("created_at")
  updatedAt         DateTime @updatedAt @map("updated_at")
  sourceAccount     ChartOfAccount @relation("sourceAccount", fields: [sourceAccountId], references: [id])
  targetAccount     ChartOfAccount @relation("targetAccount", fields: [targetAccountId], references: [id])
  debitAccount      ChartOfAccount @relation("debitAccount", fields: [debitAccountId], references: [id])
  creditAccount     ChartOfAccount @relation("creditAccount", fields: [creditAccountId], references: [id])
  @@index([tenantId])
  @@index([transactionType])
  @@map("gl_posting_template")
}
model PayrollGlPosting {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  payrollId         String   @db.VarChar(36) @map("payroll_id")
  journalEntryId    String   @db.VarChar(36) @map("journal_entry_id")
  salaryExpenseAccountId String @db.VarChar(36) @map("salary_expense_account_id")
  salaryPayableAccountId String @db.VarChar(36) @map("salary_payable_account_id")
  totalSalary       Decimal  @db.Decimal(15, 2) @map("total_salary")
  totalDeductions   Decimal  @db.Decimal(15, 2) @map("total_deductions")
  postingDate       DateTime @map("posting_date") @db.Date
  status            String   @default("pending") @db.VarChar(50)
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@index([payrollId])
  @@map("payroll_gl_posting")
}
model PurchaseGlPosting {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  poId              String   @db.VarChar(36) @map("po_id")
  journalEntryId    String   @db.VarChar(36) @map("journal_entry_id")
  inventoryAccountId String @db.VarChar(36) @map("inventory_account_id")
  expenseAccountId  String   @db.VarChar(36) @map("expense_account_id")
  payableAccountId  String   @db.VarChar(36) @map("payable_account_id")
  netAmount         Decimal  @db.Decimal(18, 2) @map("net_amount")
  postingDate       DateTime @map("posting_date") @db.Date
  status            String   @default("pending") @db.VarChar(50)
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@index([poId])
  @@map("purchase_gl_posting")
}
model SalesGlPosting {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  invoiceId         String   @db.VarChar(36) @map("invoice_id")
  journalEntryId    String   @db.VarChar(36) @map("journal_entry_id")
  revenueAccountId  String   @db.VarChar(36) @map("revenue_account_id")
  receivableAccountId String @db.VarChar(36) @map("receivable_account_id")
  netAmount         Decimal  @db.Decimal(18, 2) @map("net_amount")
  postingDate       DateTime @map("posting_date") @db.Date
  status            String   @default("pending") @db.VarChar(50)
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@index([invoiceId])
  @@map("sales_gl_posting")
}
model BankStatement {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  bankAccountId     String   @db.VarChar(36) @map("bank_account_id")
  statementDate     DateTime @map("statement_date") @db.Date
  openingBalance    Decimal  @db.Decimal(18, 2) @map("opening_balance")
  closingBalance    Decimal  @db.Decimal(18, 2) @map("closing_balance")
  totalDeposits     Decimal  @default(0) @db.Decimal(18, 2) @map("total_deposits")
  totalWithdrawals  Decimal  @default(0) @db.Decimal(18, 2) @map("total_withdrawals")
  statementFile     String?  @db.VarChar(255) @map("statement_file")
  uploadedBy        String?  @db.VarChar(36) @map("uploaded_by")
  uploadedAt        DateTime? @map("uploaded_at")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@index([bankAccountId])
  @@map("bank_statement")
}
model BankTransaction {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  bankStatementId   String   @db.VarChar(36) @map("bank_statement_id")
  transactionDate   DateTime @map("transaction_date") @db.Date
  description       String   @db.VarChar(255)
  amount            Decimal  @db.Decimal(18, 2)
  transactionType   String   @db.VarChar(50) @map("transaction_type")
  referenceNumber   String?  @db.VarChar(100) @map("reference_number")
  balance           Decimal  @db.Decimal(18, 2)
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@index([bankStatementId])
  @@map("bank_transaction")
}
model BankReconciliationMatch {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  bankTransactionId String   @db.VarChar(36) @map("bank_transaction_id")
  journalEntryId    String?  @db.VarChar(36) @map("journal_entry_id")
  matchDate         DateTime @map("match_date") @db.Date
  amount            Decimal  @db.Decimal(18, 2)
  status            String   @default("matched") @db.VarChar(50)
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("bank_reconciliation_match")
}
model UnclearedItem {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  bankAccountId     String   @db.VarChar(36) @map("bank_account_id")
  journalEntryId    String?  @db.VarChar(36) @map("journal_entry_id")
  itemDate          DateTime @map("item_date") @db.Date
  description       String?  @db.VarChar(255)
  amount            Decimal  @db.Decimal(18, 2)
  itemType          String   @db.VarChar(50) @map("item_type")
  daysOutstanding   Int?     @map("days_outstanding")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("uncleared_item")
}
model CashFlowForecast {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  forecastDate      DateTime @map("forecast_date") @db.Date
  forecastPeriod    String   @db.VarChar(50) @map("forecast_period")
  projectedInflows  Decimal  @db.Decimal(18, 2) @map("projected_inflows")
  projectedOutflows Decimal  @db.Decimal(18, 2) @map("projected_outflows")
  projectedBalance  Decimal  @db.Decimal(18, 2) @map("projected_balance")
  createdBy         String?  @db.VarChar(36) @map("created_by")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("cash_flow_forecast")
}
model CashFlowItem {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  forecastId        String   @db.VarChar(36) @map("forecast_id")
  itemType          String   @db.VarChar(50) @map("item_type")
  description       String?  @db.VarChar(255)
  amount            Decimal  @db.Decimal(18, 2)
  dueDate           DateTime @map("due_date") @db.Date
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@index([forecastId])
  @@map("cash_flow_item")
}

model Employee {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  employeeCode      String   @unique @db.VarChar(50) @map("employee_code")
  firstName         String   @db.VarChar(100) @map("first_name")
  lastName          String   @db.VarChar(100) @map("last_name")
  email             String?  @db.VarChar(255)
  phone             String?  @db.VarChar(20)
  departmentId      String?  @db.VarChar(36) @map("department_id")
  designationId     String?  @db.VarChar(36) @map("designation_id")
  joiningDate       DateTime @map("joining_date") @db.Date
  status            String   @default("active") @db.VarChar(50)
  createdAt         DateTime @default(now()) @map("created_at")
  updatedAt         DateTime @updatedAt @map("updated_at")
  employeeDetails   EmployeeDetails?
  leaveBalances     LeaveBalance[]
  epfRegistrations  EmployeeEPFRegistration[]
  esiRegistrations  EmployeeESIRegistration[]
  epfContributions  EPFContribution[]
  esiContributions  ESIContribution[]
  complianceChecklist EmployeeComplianceChecklist[]
  @@index([tenantId])
  @@index([employeeCode])
  @@index([status])
  @@map("employee")
}
model EmployeeDetails {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  employeeId        String   @unique @db.Char(36) @map("employee_id")
  fatherName        String?  @db.VarChar(255) @map("father_name")
  motherName        String?  @db.VarChar(255) @map("mother_name")
  spouse            String?  @db.VarChar(255)
  children          Int      @default(0)
  dateOfBirth       DateTime @map("date_of_birth") @db.Date
  bloodGroup        String?  @db.VarChar(5) @map("blood_group")
  aadhar            String?  @db.VarChar(50)
  pan               String?  @db.VarChar(50)
  pfNumber          String?  @db.VarChar(50) @map("pf_number")
  esiNumber         String?  @db.VarChar(50) @map("esi_number")
  bankAccountNumber String?  @db.VarChar(50) @map("bank_account_number")
  bankName          String?  @db.VarChar(100) @map("bank_name")
  ifscCode          String?  @db.VarChar(20) @map("ifsc_code")
  createdAt         DateTime @default(now()) @map("created_at")
  updatedAt         DateTime @updatedAt @map("updated_at")
  employee          Employee @relation(fields: [employeeId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@map("employee_details")
}
model LeaveType {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  leaveTypeName     String   @db.VarChar(100) @map("leave_type_name")
  allowedDays       Int      @map("allowed_days")
  accrualRate       Decimal? @db.Decimal(5, 2) @map("accrual_rate")
  isCarryOver       Boolean  @default(false) @map("is_carry_over")
  maxCarryOver      Int      @default(0) @map("max_carry_over")
  requiresApproval  Boolean  @default(true) @map("requires_approval")
  createdAt         DateTime @default(now()) @map("created_at")
  @@unique([tenantId, leaveTypeName])
  @@index([tenantId])
  @@map("leave_type")
}
model LeaveBalance {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  employeeId        String   @db.Char(36) @map("employee_id")
  leaveTypeId       String   @db.VarChar(36) @map("leave_type_id")
  year              Int
  openingBalance    Decimal  @db.Decimal(5, 2) @map("opening_balance")
  accrued           Decimal  @db.Decimal(5, 2)
  utilized          Decimal  @db.Decimal(5, 2)
  carried           Decimal  @db.Decimal(5, 2)
  closingBalance    Decimal  @db.Decimal(5, 2) @map("closing_balance")
  updatedAt         DateTime @updatedAt @map("updated_at")
  employee          Employee @relation(fields: [employeeId], references: [id], onDelete: Cascade)
  @@unique([tenantId, employeeId, leaveTypeId, year])
  @@index([tenantId])
  @@map("leave_balance")
}
model Designation {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  designationName   String   @db.VarChar(100) @map("designation_name")
  designationLevel  Int?     @map("designation_level")
  description       String?  @db.Text
  createdAt         DateTime @default(now()) @map("created_at")
  @@unique([tenantId, designationName])
  @@index([tenantId])
  @@map("designation")
}
model Department {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  departmentName    String   @db.VarChar(100) @map("department_name")
  departmentCode    String   @db.VarChar(50) @map("department_code")
  headId            String?  @db.VarChar(36) @map("head_id")
  costCenter        String?  @db.VarChar(50) @map("cost_center")
  description       String?  @db.Text
  createdAt         DateTime @default(now()) @map("created_at")
  @@unique([tenantId, departmentCode])
  @@index([tenantId])
  @@map("department")
}
model SalaryComponent {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  componentName     String   @db.VarChar(100) @map("component_name")
  componentType     String   @db.VarChar(50) @map("component_type")
  taxable           Boolean  @default(false)
  formula           String?  @db.Text
  createdAt         DateTime @default(now()) @map("created_at")
  @@unique([tenantId, componentName])
  @@index([tenantId])
  @@map("salary_component")
}
model PayrollRun {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  month             Int
  year              Int
  payrollStatus     String   @default("draft") @db.VarChar(50) @map("payroll_status")
  totalEmployees    Int      @map("total_employees")
  totalSalary       Decimal  @db.Decimal(15, 2) @map("total_salary")
  totalDeductions   Decimal  @db.Decimal(15, 2) @map("total_deductions")
  netPayable        Decimal  @db.Decimal(15, 2) @map("net_payable")
  freezeDate        DateTime? @map("freeze_date")
  processedBy       String?  @db.VarChar(36) @map("processed_by")
  processedAt       DateTime? @map("processed_at")
  createdAt         DateTime @default(now()) @map("created_at")
  @@unique([tenantId, month, year])
  @@index([tenantId])
  @@map("payroll_run")
}
model EPFConfiguration {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  epfNumber         String   @unique @db.VarChar(50) @map("epf_number")
  epfRegistrationDate DateTime @map("epf_registration_date") @db.Date
  epfEstablishmentCode String @db.VarChar(50) @map("epf_establishment_code")
  companyContributionRate Decimal @db.Decimal(5, 2) @map("company_contribution_rate")
  employeeContributionRate Decimal @db.Decimal(5, 2) @map("employee_contribution_rate")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("epf_configuration")
}
model ESIConfiguration {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  esiNumber         String   @unique @db.VarChar(50) @map("esi_number")
  esiRegistrationDate DateTime @map("esi_registration_date") @db.Date
  companyContributionRate Decimal @db.Decimal(5, 2) @map("company_contribution_rate")
  employeeContributionRate Decimal @db.Decimal(5, 2) @map("employee_contribution_rate")
  wageLimit         Decimal  @db.Decimal(10, 2) @map("wage_limit")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("esi_configuration")
}
model EmployeeEPFRegistration {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  employeeId        String   @db.Char(36) @map("employee_id")
  epfNumber         String   @db.VarChar(50) @map("epf_number")
  enrollmentDate    DateTime @map("enrollment_date") @db.Date
  memberStatus      String   @default("active") @db.VarChar(50) @map("member_status")
  createdAt         DateTime @default(now()) @map("created_at")
  employee          Employee @relation(fields: [employeeId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@map("employee_epf_registration")
}
model EmployeeESIRegistration {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  employeeId        String   @db.Char(36) @map("employee_id")
  esiNumber         String   @db.VarChar(50) @map("esi_number")
  enrollmentDate    DateTime @map("enrollment_date") @db.Date
  memberStatus      String   @default("active") @db.VarChar(50) @map("member_status")
  createdAt         DateTime @default(now()) @map("created_at")
  employee          Employee @relation(fields: [employeeId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@map("employee_esi_registration")
}
model EPFContribution {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  employeeId        String   @db.Char(36) @map("employee_id")
  payrollMonth      Int      @map("payroll_month")
  payrollYear       Int      @map("payroll_year")
  companyContribution Decimal @db.Decimal(12, 2) @map("company_contribution")
  employeeContribution Decimal @db.Decimal(12, 2) @map("employee_contribution")
  submissionDate    DateTime? @map("submission_date") @db.Date
  createdAt         DateTime @default(now()) @map("created_at")
  employee          Employee @relation(fields: [employeeId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@map("epf_contribution")
}
model ESIContribution {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  employeeId        String   @db.Char(36) @map("employee_id")
  payrollMonth      Int      @map("payroll_month")
  payrollYear       Int      @map("payroll_year")
  companyContribution Decimal @db.Decimal(12, 2) @map("company_contribution")
  employeeContribution Decimal @db.Decimal(12, 2) @map("employee_contribution")
  submissionDate    DateTime? @map("submission_date") @db.Date
  createdAt         DateTime @default(now()) @map("created_at")
  employee          Employee @relation(fields: [employeeId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@map("esi_contribution")
}
model ComplianceRecord {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  recordType        String   @db.VarChar(100) @map("record_type")
  recordValue       String?  @db.Text @map("record_value")
  dueDate           DateTime? @map("due_date") @db.Date
  completionDate    DateTime? @map("completion_date") @db.Date
  status            String   @default("pending") @db.VarChar(50)
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@index([status])
  @@map("compliance_record")
}
model EmployeeComplianceChecklist {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  employeeId        String   @db.Char(36) @map("employee_id")
  itemDescription   String   @db.VarChar(255) @map("item_description")
  isCompleted       Boolean  @default(false) @map("is_completed")
  completionDate    DateTime? @map("completion_date") @db.Date
  notes             String?  @db.Text
  createdAt         DateTime @default(now()) @map("created_at")
  employee          Employee @relation(fields: [employeeId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@map("employee_compliance_checklist")
}

model SalesLead {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  leadCode          String   @unique @db.VarChar(50) @map("lead_code")
  leadName          String   @db.VarChar(255) @map("lead_name")
  email             String?  @db.VarChar(255)
  phone             String?  @db.VarChar(20)
  company           String?  @db.VarChar(255)
  leadSource        String?  @db.VarChar(100) @map("lead_source")
  leadValue         Decimal? @db.Decimal(15, 2) @map("lead_value")
  leadStatus        String   @default("new") @db.VarChar(50) @map("lead_status")
  description       String?  @db.Text
  assignedTo        String?  @db.VarChar(36) @map("assigned_to")
  createdBy         String?  @db.VarChar(36) @map("created_by")
  createdAt         DateTime @default(now()) @map("created_at")
  updatedAt         DateTime @updatedAt @map("updated_at")
  statusHistory     SalesStatusHistory[]
  followUps         SalesFollowUp[]
  attributionEvents AttributionEvent[]       // Events that drove this lead
  attributionSnapshots LeadAttributionSnapshot[] // Attribution analysis snapshots
  @@index([tenantId])
  @@index([leadCode])
  @@index([leadStatus])
  @@map("sales_lead")
}
model SalesCustomer {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  customerCode      String   @unique @db.VarChar(50) @map("customer_code")
  name              String   @db.VarChar(255)
  email             String?  @db.VarChar(255)
  phone             String?  @db.VarChar(20)
  address           String?  @db.Text
  city              String?  @db.VarChar(100)
  state             String?  @db.VarChar(100)
  country           String?  @db.VarChar(100)
  postalCode        String?  @db.VarChar(20) @map("postal_code")
  customerType      String?  @db.VarChar(50) @map("customer_type")
  creditLimit       Decimal? @db.Decimal(15, 2) @map("credit_limit")
  paymentTerms      String?  @db.VarChar(100) @map("payment_terms")
  status            String   @default("active") @db.VarChar(50)
  createdAt         DateTime @default(now()) @map("created_at")
  updatedAt         DateTime @updatedAt @map("updated_at")
  calls             Call[]
  @@index([tenantId])
  @@index([customerCode])
  @@map("sales_customer")
}
model Quotation {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  quotationNumber   String   @unique @db.VarChar(50) @map("quotation_number")
  customerId        String?  @db.VarChar(36) @map("customer_id")
  quotationDate     DateTime @map("quotation_date") @db.Date
  validTill         DateTime @map("valid_till") @db.Date
  totalAmount       Decimal? @db.Decimal(18, 2) @map("total_amount")
  tax               Decimal  @default(0) @db.Decimal(18, 2)
  netAmount         Decimal? @db.Decimal(18, 2) @map("net_amount")
  status            String   @default("draft") @db.VarChar(50)
  approvedBy        String?  @db.VarChar(36) @map("approved_by")
  approvedAt        DateTime? @map("approved_at")
  createdBy         String?  @db.VarChar(36) @map("created_by")
  createdAt         DateTime @default(now()) @map("created_at")
  updatedAt         DateTime @updatedAt @map("updated_at")
  lineItems         QuotationLineItem[]
  @@index([tenantId])
  @@index([quotationNumber])
  @@index([status])
  @@map("quotation")
}
model QuotationLineItem {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  quotationId       String   @db.VarChar(36) @map("quotation_id")
  description       String?  @db.VarChar(500)
  quantity          Decimal  @db.Decimal(18, 4)
  unitPrice         Decimal  @db.Decimal(18, 4) @map("unit_price")
  lineAmount        Decimal  @db.Decimal(18, 2) @map("line_amount")
  tax               Decimal  @default(0) @db.Decimal(18, 2)
  lineTotal         Decimal  @db.Decimal(18, 2) @map("line_total")
  createdAt         DateTime @default(now()) @map("created_at")
  quotation         Quotation @relation(fields: [quotationId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@index([quotationId])
  @@map("quotation_line_item")
}
model SalesOrder {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  orderNumber       String   @unique @db.VarChar(50) @map("order_number")
  customerId        String?  @db.VarChar(36) @map("customer_id")
  quotationId       String?  @db.VarChar(36) @map("quotation_id")
  orderDate         DateTime @map("order_date") @db.Date
  deliveryDate      DateTime? @map("delivery_date") @db.Date
  totalAmount       Decimal? @db.Decimal(18, 2) @map("total_amount")
  tax               Decimal  @default(0) @db.Decimal(18, 2)
  netAmount         Decimal? @db.Decimal(18, 2) @map("net_amount")
  status            String   @default("draft") @db.VarChar(50)
  createdBy         String?  @db.VarChar(36) @map("created_by")
  createdAt         DateTime @default(now()) @map("created_at")
  updatedAt         DateTime @updatedAt @map("updated_at")
  lineItems         SalesOrderLineItem[]
  invoices          SalesInvoice[]
  @@index([tenantId])
  @@index([orderNumber])
  @@index([status])
  @@map("sales_order")
}
model SalesOrderLineItem {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  orderid           String   @db.VarChar(36) @map("order_id")
  description       String?  @db.VarChar(500)
  quantity          Decimal  @db.Decimal(18, 4)
  unitPrice         Decimal  @db.Decimal(18, 4) @map("unit_price")
  lineAmount        Decimal  @db.Decimal(18, 2) @map("line_amount")
  tax               Decimal  @default(0) @db.Decimal(18, 2)
  lineTotal         Decimal  @db.Decimal(18, 2) @map("line_total")
  quantityDelivered Decimal  @default(0) @db.Decimal(18, 4) @map("quantity_delivered")
  createdAt         DateTime @default(now()) @map("created_at")
  order             SalesOrder @relation(fields: [orderid], references: [id], onDelete: Cascade)
  exportHSCodeLineItems ExportHSCodeLineItem[] // From import/export module
  @@index([tenantId])
  @@index([orderid])
  @@map("sales_order_line_item")
}
model SalesInvoice {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  invoiceNumber     String   @unique @db.VarChar(50) @map("invoice_number")
  orderId           String?  @db.VarChar(36) @map("order_id")
  customerId        String?  @db.VarChar(36) @map("customer_id")
  invoiceDate       DateTime @map("invoice_date") @db.Date
  dueDate           DateTime? @map("due_date") @db.Date
  totalAmount       Decimal? @db.Decimal(18, 2) @map("total_amount")
  tax               Decimal  @default(0) @db.Decimal(18, 2)
  netAmount         Decimal? @db.Decimal(18, 2) @map("net_amount")
  amountPaid        Decimal  @default(0) @db.Decimal(18, 2) @map("amount_paid")
  status            String   @default("draft") @db.VarChar(50)
  createdBy         String?  @db.VarChar(36) @map("created_by")
  createdAt         DateTime @default(now()) @map("created_at")
  updatedAt         DateTime @updatedAt @map("updated_at")
  order             SalesOrder? @relation(fields: [orderId], references: [id])
  lineItems         SalesInvoiceLineItem[]
  @@index([tenantId])
  @@index([invoiceNumber])
  @@index([status])
  @@map("sales_invoice")
}
model SalesInvoiceLineItem {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  invoiceId         String   @db.VarChar(36) @map("invoice_id")
  description       String?  @db.VarChar(500)
  quantity          Decimal  @db.Decimal(18, 4)
  unitPrice         Decimal  @db.Decimal(18, 4) @map("unit_price")
  lineAmount        Decimal  @db.Decimal(18, 2) @map("line_amount")
  tax               Decimal  @default(0) @db.Decimal(18, 2)
  lineTotal         Decimal  @db.Decimal(18, 2) @map("line_total")
  createdAt         DateTime @default(now()) @map("created_at")
  invoice           SalesInvoice @relation(fields: [invoiceId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@index([invoiceId])
  @@map("sales_invoice_line_item")
}
model SalesReturn {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  returnNumber      String   @unique @db.VarChar(50) @map("return_number")
  invoiceId         String?  @db.VarChar(36) @map("invoice_id")
  returnDate        DateTime @map("return_date") @db.Date
  reason            String?  @db.Text
  totalAmount       Decimal  @db.Decimal(18, 2) @map("total_amount")
  status            String   @default("pending") @db.VarChar(50)
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@index([returnNumber])
  @@map("sales_return")
}
model SalesStatusHistory {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  leadId            String   @db.VarChar(36) @map("lead_id")
  oldStatus         String   @db.VarChar(50) @map("old_status")
  newStatus         String   @db.VarChar(50) @map("new_status")
  changedBy         String?  @db.VarChar(36) @map("changed_by")
  remarks           String?  @db.Text
  changedAt         DateTime @default(now()) @map("changed_at")
  lead              SalesLead @relation(fields: [leadId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@index([leadId])
  @@map("sales_status_history")
}
model SalesFollowUp {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  leadId            String   @db.Char(36) @map("lead_id")
  followUpDate      DateTime @map("follow_up_date") @db.Date
  followUpType      String   @db.VarChar(50) @map("follow_up_type")
  notes             String?  @db.Text
  result            String?  @db.VarChar(100)
  nextFollowUpDate  DateTime? @map("next_follow_up_date") @db.Date
  createdBy         String?  @db.VarChar(36) @map("created_by")
  createdAt         DateTime @default(now()) @map("created_at")
  lead              SalesLead @relation(fields: [leadId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@index([leadId])
  @@map("sales_follow_up")
}
model SalesTarget {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  period            String   @db.VarChar(50)
  salesPersonId     String   @db.VarChar(36) @map("sales_person_id")
  targetAmount      Decimal  @db.Decimal(15, 2) @map("target_amount")
  achievedAmount    Decimal  @default(0) @db.Decimal(15, 2) @map("achieved_amount")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("sales_target")
}
model LeadStatusType {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  statusName        String   @db.VarChar(100) @map("status_name")
  statusCode        String   @db.VarChar(50) @map("status_code")
  description       String?  @db.Text
  colorCode         String?  @db.VarChar(10) @map("color_code")
  sequenceOrder     Int      @map("sequence_order")
  createdAt         DateTime @default(now()) @map("created_at")
  @@unique([tenantId, statusCode])
  @@index([tenantId])
  @@map("lead_status_type")
}
model LeadConversionRate {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  sourceId          String   @db.VarChar(36) @map("source_id")
  statusId          String   @db.VarChar(36) @map("status_id")
  conversionPercent Decimal  @db.Decimal(5, 2) @map("conversion_percent")
  totalLeads        Int      @default(0) @map("total_leads")
  convertedLeads    Int      @default(0) @map("converted_leads")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("lead_conversion_rate")
}

model PropertyProject {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  projectName       String   @db.VarChar(255) @map("project_name")
  projectCode       String   @unique @db.VarChar(50) @map("project_code")
  location          String?  @db.VarChar(255)
  city              String?  @db.VarChar(100)
  state             String?  @db.VarChar(100)
  country           String?  @db.VarChar(100)
  postalCode        String?  @db.VarChar(20) @map("postal_code")
  projectType       String?  @db.VarChar(50) @map("project_type")
  totalArea         Decimal? @db.Decimal(15, 2) @map("total_area")
  totalUnits        Int      @default(0) @map("total_units")
  launchDate        DateTime? @map("launch_date") @db.Date
  completionDate    DateTime? @map("completion_date") @db.Date
  status            String   @default("planning") @db.VarChar(50)
  developerId       String?  @db.VarChar(36) @map("developer_id")
  description       String?  @db.LongText
  createdAt         DateTime @default(now()) @map("created_at")
  updatedAt         DateTime @updatedAt @map("updated_at")
  blocks            PropertyBlock[]
  units             PropertyUnit[]
  @@index([tenantId])
  @@index([projectCode])
  @@index([status])
  @@map("property_project")
}
model PropertyBlock {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  projectId         String   @db.VarChar(36) @map("project_id")
  blockName         String   @db.VarChar(100) @map("block_name")
  blockCode         String   @db.VarChar(50) @map("block_code")
  totalUnits        Int      @default(0) @map("total_units")
  unitsLeft         Int      @default(0) @map("units_left")
  createdAt         DateTime @default(now()) @map("created_at")
  project           PropertyProject @relation(fields: [projectId], references: [id], onDelete: Cascade)
  units             PropertyUnit[]
  @@unique([projectId, blockCode])
  @@index([tenantId])
  @@index([projectId])
  @@map("property_block")
}
model PropertyUnit {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  projectId         String   @db.VarChar(36) @map("project_id")
  blockId           String?  @db.VarChar(36) @map("block_id")
  unitNumber        String   @db.VarChar(50) @map("unit_number")
  unitType          String   @db.VarChar(50) @map("unit_type")
  builtUpArea       Decimal  @db.Decimal(10, 2) @map("built_up_area")
  carpetArea        Decimal  @db.Decimal(10, 2) @map("carpet_area")
  superBuiltUpArea  Decimal? @db.Decimal(10, 2) @map("super_built_up_area")
  bedrooms          Int?
  bathrooms         Int?
  floor             Int?
  basePrice         Decimal  @db.Decimal(15, 2) @map("base_price")
  status            String   @default("available") @db.VarChar(50)
  description       String?  @db.Text
  createdAt         DateTime @default(now()) @map("created_at")
  updatedAt         DateTime @updatedAt @map("updated_at")
  project           PropertyProject @relation(fields: [projectId], references: [id], onDelete: Cascade)
  block             PropertyBlock? @relation(fields: [blockId], references: [id], onDelete: SetNull)
  costSheets        UnitCostSheet[]
  bookings          Booking[]
  paymentPlans      PaymentPlan[]
  @@unique([projectId, unitNumber])
  @@index([tenantId])
  @@index([projectId])
  @@index([status])
  @@map("property_unit")
}
model UnitCostSheet {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  unitId            String   @db.VarChar(36) @map("unit_id")
  basicPrice        Decimal  @db.Decimal(15, 2) @map("basic_price")
  floorRiseFactor   Decimal  @default(0) @db.Decimal(5, 2) @map("floor_rise_factor")
  cornerFactor      Decimal  @default(0) @db.Decimal(5, 2) @map("corner_factor")
  otherCharges      Decimal  @default(0) @db.Decimal(15, 2) @map("other_charges")
  taxes             Decimal  @default(0) @db.Decimal(15, 2)
  totalPrice        Decimal  @db.Decimal(15, 2) @map("total_price")
  validFrom         DateTime @map("valid_from") @db.Date
  validTill         DateTime? @map("valid_till") @db.Date
  createdAt         DateTime @default(now()) @map("created_at")
  unit              PropertyUnit @relation(fields: [unitId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@index([unitId])
  @@map("unit_cost_sheet")
}
model PaymentPlan {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  unitId            String   @db.VarChar(36) @map("unit_id")
  planName          String   @db.VarChar(100) @map("plan_name")
  totalPrice        Decimal  @db.Decimal(15, 2) @map("total_price")
  upfrontAmount     Decimal  @db.Decimal(15, 2) @map("upfront_amount")
  upfrontPercent    Decimal? @db.Decimal(5, 2) @map("upfront_percent")
  description       String?  @db.Text
  isActive          Boolean  @default(true) @map("is_active")
  createdAt         DateTime @default(now()) @map("created_at")
  updatedAt         DateTime @updatedAt @map("updated_at")
  unit              PropertyUnit @relation(fields: [unitId], references: [id], onDelete: Cascade)
  installments      Installment[]
  @@index([tenantId])
  @@index([unitId])
  @@map("payment_plan")
}
model Installment {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  paymentPlanId     String   @db.VarChar(36) @map("payment_plan_id")
  installmentNumber Int      @map("installment_number")
  dueDate           DateTime @map("due_date") @db.Date
  amount            Decimal  @db.Decimal(15, 2)
  description       String?  @db.VarChar(255)
  createdAt         DateTime @default(now()) @map("created_at")
  paymentPlan       PaymentPlan @relation(fields: [paymentPlanId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@index([paymentPlanId])
  @@map("installment")
}
model Booking {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  unitId            String   @db.VarChar(36) @map("unit_id")
  customerId        String?  @db.VarChar(36) @map("customer_id")
  bookingDate       DateTime @map("booking_date") @db.Date
  bookingAmount     Decimal  @db.Decimal(15, 2) @map("booking_amount")
  status            String   @default("booked") @db.VarChar(50)
  notes             String?  @db.Text
  createdAt         DateTime @default(now()) @map("created_at")
  updatedAt         DateTime @updatedAt @map("updated_at")
  unit              PropertyUnit @relation(fields: [unitId], references: [id], onDelete: Cascade)
  @@unique([unitId])
  @@index([tenantId])
  @@index([customerId])
  @@map("booking")
}
model PropertyCostBreakup {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  unitId            String   @db.VarChar(36) @map("unit_id")
  costCategory      String   @db.VarChar(100) @map("cost_category")
  costAmount        Decimal  @db.Decimal(15, 2) @map("cost_amount")
  costPercent       Decimal? @db.Decimal(5, 2) @map("cost_percent")
  description       String?  @db.Text
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@index([unitId])
  @@map("property_cost_breakup")
}
model PropertyAmenity {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  projectId         String?  @db.VarChar(36) @map("project_id")
  amenityName       String   @db.VarChar(100) @map("amenity_name")
  amenityType       String?  @db.VarChar(50) @map("amenity_type")
  description       String?  @db.Text
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("property_amenity")
}
model PropertyUnitAreaStatement {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  unitId            String   @db.VarChar(36) @map("unit_id")
  areaType          String   @db.VarChar(100) @map("area_type")
  areaValue         Decimal  @db.Decimal(10, 2) @map("area_value")
  areaUnit          String   @db.VarChar(20) @map("area_unit")
  description       String?  @db.Text
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("property_unit_area_statement")
}
model ProjectCostConfiguration {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  projectId         String   @db.VarChar(36) @map("project_id")
  costName          String   @db.VarChar(100) @map("cost_name")
  costFormula       String?  @db.Text @map("cost_formula")
  applicableUnits   String?  @db.Text @map("applicable_units")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("project_cost_configuration")
}
model PropertyCustomerProfile {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  customerId        String   @db.VarChar(36) @map("customer_id")
  occupationStatus  String?  @db.VarChar(100) @map("occupation_status")
  incomeRange       String?  @db.VarChar(50) @map("income_range")
  investmentGoal    String?  @db.VarChar(255) @map("investment_goal")
  investmentTimeline String? @db.VarChar(50) @map("investment_timeline")
  preferences       String?  @db.Text
  createdAt         DateTime @default(now()) @map("created_at")
  updatedAt         DateTime @updatedAt @map("updated_at")
  @@index([tenantId])
  @@index([customerId])
  @@map("property_customer_profile")
}
model PropertyComparable {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  projectId         String   @db.VarChar(36) @map("project_id")
  comparableType    String   @db.VarChar(100) @map("comparable_type")
  location          String?  @db.VarChar(255)
  pricePerSqFt      Decimal  @db.Decimal(10, 2) @map("price_per_sqft")
  marketData        String?  @db.Text @map("market_data")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("property_comparable")
}
model SiteVisitFeedback {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  siteVisitId       String   @db.VarChar(36) @map("site_visit_id")
  feedback          String?  @db.Text
  rating            Decimal? @db.Decimal(3, 1)
  followUpRequired  Boolean  @default(false) @map("follow_up_required")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("site_visit_feedback")
}

model ComplianceChecklist {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  checklistName     String   @db.VarChar(255) @map("checklist_name")
  description       String?  @db.Text
  frequency         String   @db.VarChar(50)
  dueDate           DateTime @map("due_date") @db.Date
  completionDate    DateTime? @map("completion_date") @db.Date
  status            String   @default("pending") @db.VarChar(50)
  completedBy       String?  @db.VarChar(36) @map("completed_by")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@index([status])
  @@map("compliance_checklist")
}
model TaxCalculation {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  transactionType   String   @db.VarChar(100) @map("transaction_type")
  transactionId     String?  @db.VarChar(36) @map("transaction_id")
  taxType           String   @db.VarChar(50) @map("tax_type")
  taxableAmount     Decimal  @db.Decimal(15, 2) @map("taxable_amount")
  taxRate           Decimal  @db.Decimal(5, 2) @map("tax_rate")
  taxAmount         Decimal  @db.Decimal(15, 2) @map("tax_amount")
  calculatedDate    DateTime @map("calculated_date") @db.Date
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@index([transactionType])
  @@map("tax_calculation")
}
model AuditTrail {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  auditType         String   @db.VarChar(100) @map("audit_type")
  entityType        String   @db.VarChar(100) @map("entity_type")
  entityId          String?  @db.VarChar(36) @map("entity_id")
  auditDate         DateTime @map("audit_date") @db.Date
  findings          String?  @db.LongText
  status            String   @db.VarChar(50)
  auditor           String?  @db.VarChar(255)
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@index([auditType])
  @@map("audit_trail")
}
model RegulatoryRequirement {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  requirementName   String   @db.VarChar(255) @map("requirement_name")
  requirementType   String   @db.VarChar(100) @map("requirement_type")
  jurisdiction      String   @db.VarChar(100)
  dueDate           DateTime @map("due_date") @db.Date
  status            String   @default("pending") @db.VarChar(50)
  ownerDepartment   String?  @db.VarChar(100) @map("owner_department")
  description       String?  @db.Text
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@index([status])
  @@map("regulatory_requirement")
}
model ComplianceDocument {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  complianceType    String   @db.VarChar(100) @map("compliance_type")
  documentName      String   @db.VarChar(255) @map("document_name")
  documentPath      String?  @db.VarChar(500) @map("document_path")
  uploadDate        DateTime @map("upload_date") @db.Date
  expiryDate        DateTime? @map("expiry_date") @db.Date
  uploadedBy        String?  @db.VarChar(36) @map("uploaded_by")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("compliance_document")
}
model ComplianceNotification {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  notificationType  String   @db.VarChar(100) @map("notification_type")
  subject           String   @db.VarChar(255)
  message           String?  @db.LongText
  dueDate           DateTime @map("due_date") @db.Date
  recipientEmail    String?  @db.VarChar(255) @map("recipient_email")
  sentDate          DateTime? @map("sent_date")
  status            String   @default("pending") @db.VarChar(50)
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@index([status])
  @@map("compliance_notification")
}

model CommunicationChannel {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  channelName       String   @db.VarChar(100) @map("channel_name")
  channelType       String   @db.VarChar(50) @map("channel_type")
  description       String?  @db.Text
  isActive          Boolean  @default(true) @map("is_active")
  configData        Json?    @map("config_data")
  createdAt         DateTime @default(now()) @map("created_at")
  @@unique([tenantId, channelName])
  @@index([tenantId])
  @@map("communication_channel")
}
model MessageTemplate {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  templateName      String   @db.VarChar(255) @map("template_name")
  templateType      String   @db.VarChar(50) @map("template_type")
  channelId         String?  @db.VarChar(36) @map("channel_id")
  subject           String?  @db.VarChar(255)
  body              String?  @db.LongText
  variables         String?  @db.Text
  isActive          Boolean  @default(true) @map("is_active")
  createdAt         DateTime @default(now()) @map("created_at")
  updatedAt         DateTime @updatedAt @map("updated_at")
  @@index([tenantId])
  @@map("message_template")
}
model CommunicationSession {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  sessionId         String   @unique @db.VarChar(100) @map("session_id")
  initiatorId       String   @db.VarChar(36) @map("initiator_id")
  participantIds    String?  @db.Text @map("participant_ids")
  channelType       String   @db.VarChar(50) @map("channel_type")
  subject           String?  @db.VarChar(255)
  status            String   @default("active") @db.VarChar(50)
  startTime         DateTime @map("start_time")
  endTime           DateTime? @map("end_time")
  createdAt         DateTime @default(now()) @map("created_at")
  messages          CommunicationMessage[]
  @@index([tenantId])
  @@index([sessionId])
  @@map("communication_session")
}
model CommunicationMessage {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  sessionId         String   @db.VarChar(36) @map("session_id")
  senderId          String   @db.VarChar(36) @map("sender_id")
  recipientIds      String?  @db.Text @map("recipient_ids")
  messageType       String   @db.VarChar(50) @map("message_type")
  subject           String?  @db.VarChar(255)
  body              String?  @db.LongText
  attachments       Json?    @map("attachments")
  deliveryStatus    String   @default("pending") @db.VarChar(50) @map("delivery_status")
  readAt            DateTime? @map("read_at")
  failureReason     String?  @db.Text @map("failure_reason")
  sentAt            DateTime @default(now()) @map("sent_at")
  createdAt         DateTime @default(now()) @map("created_at")
  session           CommunicationSession @relation(fields: [sessionId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@index([sessionId])
  @@index([senderId])
  @@map("communication_message")
}
model EmailConfiguration {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  smtpServer        String   @db.VarChar(255) @map("smtp_server")
  smtpPort          Int      @map("smtp_port")
  fromEmail         String   @db.VarChar(255) @map("from_email")
  fromName          String?  @db.VarChar(255) @map("from_name")
  username          String?  @db.VarChar(255)
  password          String?  @db.VarChar(500)
  useSSL            Boolean  @default(true) @map("use_ssl")
  isActive          Boolean  @default(false) @map("is_active")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("email_configuration")
}
model SMSConfiguration {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  provider          String   @db.VarChar(100)
  apiKey            String   @db.VarChar(500) @map("api_key")
  senderID          String   @db.VarChar(50) @map("sender_id")
  accountBalance    Decimal? @db.Decimal(15, 2) @map("account_balance")
  isActive          Boolean  @default(false) @map("is_active")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("sms_configuration")
}
model WebhookEndpoint {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  endpointUrl       String   @db.VarChar(500) @map("endpoint_url")
  eventType         String   @db.VarChar(100) @map("event_type")
  isActive          Boolean  @default(true) @map("is_active")
  retryCount        Int      @default(3) @map("retry_count")
  timeout           Int      @default(30)
  lastTriggeredAt   DateTime? @map("last_triggered_at")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("webhook_endpoint")
}
model WebhookLog {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  webhookId         String   @db.VarChar(36) @map("webhook_id")
  eventType         String   @db.VarChar(100) @map("event_type")
  payload           Json?    @map("payload")
  statusCode        Int?     @map("status_code")
  response          String?  @db.LongText
  attemptNumber     Int      @map("attempt_number")
  nextRetryAt       DateTime? @map("next_retry_at")
  triggeredAt       DateTime @default(now()) @map("triggered_at")
  @@index([tenantId])
  @@index([webhookId])
  @@map("webhook_log")
}
model NotificationPreference {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  userId            String   @db.Char(36) @map("user_id")
  notificationType  String   @db.VarChar(100) @map("notification_type")
  channelType       String   @db.VarChar(50) @map("channel_type")
  isEnabled         Boolean  @default(true) @map("is_enabled")
  frequency         String?  @db.VarChar(50)
  createdAt         DateTime @default(now()) @map("created_at")
  @@unique([tenantId, userId, notificationType, channelType])
  @@index([tenantId])
  @@map("notification_preference")
}
model CommunicationLog {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  communicationType String   @db.VarChar(50) @map("communication_type")
  fromId            String   @db.VarChar(36) @map("from_id")
  toId              String   @db.VarChar(36) @map("to_id")
  subject           String?  @db.VarChar(255)
  status            String   @db.VarChar(50)
  sentAt            DateTime @default(now()) @map("sent_at")
  deliveredAt       DateTime? @map("delivered_at")
  readAt            DateTime? @map("read_at")
  @@index([tenantId])
  @@index([fromId, toId])
  @@map("communication_log")
}

model VOIPProvider {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  providerName      String   @db.VarChar(100) @map("provider_name")
  apiKey            String   @db.VarChar(500) @map("api_key")
  apiSecret         String   @db.VarChar(500) @map("api_secret")
  endpoint          String?  @db.VarChar(255)
  isActive          Boolean  @default(true) @map("is_active")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("voip_provider")
}
model ClickToCallSession {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  sessionId         String   @unique @db.VarChar(100) @map("session_id")
  initiatorId       String   @db.VarChar(36) @map("initiator_id")
  receiverId        String?  @db.VarChar(36) @map("receiver_id")
  initiatorPhone    String   @db.VarChar(20) @map("initiator_phone")
  receiverPhone     String?  @db.VarChar(20) @map("receiver_phone")
  status            String   @db.VarChar(50)
  duration          Int      @default(0)
  recordingUrl      String?  @db.VarChar(500) @map("recording_url")
  startTime         DateTime @map("start_time")
  endTime           DateTime? @map("end_time")
  callType          String?  @db.VarChar(50) @map("call_type")
  notes             String?  @db.Text
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@index([sessionId])
  @@map("click_to_call_session")
}
model CallRoutingRule {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  ruleName          String   @db.VarChar(100) @map("rule_name")
  priority          Int
  source            String?  @db.VarChar(255)
  destination       String?  @db.VarChar(255)
  routingType       String   @db.VarChar(50) @map("routing_type")
  targetNumber      String?  @db.VarChar(20) @map("target_number")
  targetGroupId     String?  @db.VarChar(36) @map("target_group_id")
  isActive          Boolean  @default(true) @map("is_active")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("call_routing_rule")
}
model CallDTMFInteraction {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  sessionId         String   @db.VarChar(36) @map("session_id")
  dtmfSequence      String   @db.VarChar(50) @map("dtmf_sequence")
  action            String   @db.VarChar(100)
  timestamp         DateTime @default(now())
  @@index([tenantId])
  @@index([sessionId])
  @@map("call_dtmf_interaction")
}
model IVRMenu {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  menuName          String   @db.VarChar(100) @map("menu_name")
  prompt            String   @db.Text
  recordingUrl      String?  @db.VarChar(500) @map("recording_url")
  isActive          Boolean  @default(true) @map("is_active")
  createdAt         DateTime @default(now()) @map("created_at")
  options           IVRMenuOption[]
  @@index([tenantId])
  @@map("ivr_menu")
}
model IVRMenuOption {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  menuId            String   @db.VarChar(36) @map("menu_id")
  optionKey         String   @db.VarChar(10) @map("option_key")
  optionLabel       String   @db.VarChar(255) @map("option_label")
  actionType        String   @db.VarChar(50) @map("action_type")
  actionValue       String?  @db.VarChar(255) @map("action_value")
  createdAt         DateTime @default(now()) @map("created_at")
  menu              IVRMenu  @relation(fields: [menuId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@map("ivr_menu_option")
}
model AIModel {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  modelName         String   @db.VarChar(255) @map("model_name")
  modelVersion      String   @db.VarChar(50) @map("model_version")
  modelType         String   @db.VarChar(50) @map("model_type")
  description       String?  @db.Text
  accuracy          Decimal? @db.Decimal(5, 2)
  trainingDate      DateTime? @map("training_date") @db.Date
  isActive          Boolean  @default(true) @map("is_active")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("ai_model")
}
model AIInteraction {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  sessionId         String   @db.VarChar(36) @map("session_id")
  modelId           String?  @db.VarChar(36) @map("model_id")
  input             String?  @db.LongText
  output            String?  @db.LongText
  confidence        Decimal? @db.Decimal(5, 2)
  processingTime    Int?     @map("processing_time")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@index([sessionId])
  @@map("ai_interaction")
}

model TeamChatChannel {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  channelName       String   @db.VarChar(100) @map("channel_name")
  channelType       String   @db.VarChar(50) @map("channel_type")
  isPublic          Boolean  @default(true) @map("is_public")
  description       String?  @db.Text
  createdBy         String?  @db.VarChar(36) @map("created_by")
  createdAt         DateTime @default(now()) @map("created_at")
  members           TeamChatMember[]
  messages          TeamChatMessage[]
  @@index([tenantId])
  @@map("team_chat_channel")
}
model TeamChatMember {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  channelId         String   @db.VarChar(36) @map("channel_id")
  userId            String   @db.Char(36) @map("user_id")
  role              String   @db.VarChar(50)
  joinedAt          DateTime @default(now()) @map("joined_at")
  channel           TeamChatChannel @relation(fields: [channelId], references: [id], onDelete: Cascade)
  @@unique([channelId, userId])
  @@index([tenantId])
  @@map("team_chat_member")
}
model TeamChatMessage {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  channelId         String   @db.VarChar(36) @map("channel_id")
  senderId          String   @db.Char(36) @map("sender_id")
  message           String?  @db.LongText
  attachments       Json?    @map("attachments")
  editedAt          DateTime? @map("edited_at")
  deletedAt         DateTime? @map("deleted_at")
  createdAt         DateTime @default(now()) @map("created_at")
  channel           TeamChatChannel @relation(fields: [channelId], references: [id], onDelete: Cascade)
  reactions         TeamChatReaction[]
  @@index([tenantId])
  @@index([channelId])
  @@map("team_chat_message")
}
model TeamChatReaction {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  messageId         String   @db.VarChar(36) @map("message_id")
  userId            String   @db.Char(36) @map("user_id")
  emoji             String   @db.VarChar(10)
  createdAt         DateTime @default(now()) @map("created_at")
  message           TeamChatMessage @relation(fields: [messageId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@map("team_chat_reaction")
}
model VoiceVideoCall {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  sessionId         String   @unique @db.VarChar(100) @map("session_id")
  initiatorId       String   @db.Char(36) @map("initiator_id")
  participantIds    String   @db.Text @map("participant_ids")
  callType          String   @db.VarChar(50) @map("call_type")
  status            String   @db.VarChar(50)
  startTime         DateTime @map("start_time")
  endTime           DateTime? @map("end_time")
  duration          Int      @default(0)
  recordingUrl      String?  @db.VarChar(500) @map("recording_url")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@index([sessionId])
  @@map("voice_video_call")
}
model Meeting {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  meetingTitle      String   @db.VarChar(255) @map("meeting_title")
  meetingStartTime  DateTime @map("meeting_start_time")
  meetingEndTime    DateTime? @map("meeting_end_time")
  organizerId       String   @db.Char(36) @map("organizer_id")
  participantIds    String?  @db.Text @map("participant_ids")
  description       String?  @db.Text
  location          String?  @db.VarChar(255)
  status            String   @db.VarChar(50)
  recordingUrl      String?  @db.VarChar(500) @map("recording_url")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@index([organizerId])
  @@map("meeting")
}
model WorkItem {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  title             String   @db.VarChar(255)
  description       String?  @db.LongText
  assignedTo        String?  @db.Char(36) @map("assigned_to")
  status            String   @db.VarChar(50)
  priority          String   @db.VarChar(50)
  dueDate           DateTime? @map("due_date") @db.Date
  completionDate    DateTime? @map("completion_date")
  createdBy         String?  @db.Char(36) @map("created_by")
  createdAt         DateTime @default(now()) @map("created_at")
  comments          WorkItemComment[]
  @@index([tenantId])
  @@index([status])
  @@map("work_item")
}
model WorkItemComment {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  workItemId        String   @db.VarChar(36) @map("work_item_id")
  userId            String   @db.Char(36) @map("user_id")
  comment           String   @db.LongText
  createdAt         DateTime @default(now()) @map("created_at")
  workItem          WorkItem @relation(fields: [workItemId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@map("work_item_comment")
}
model Notification {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  userId            String   @db.Char(36) @map("user_id")
  title             String   @db.VarChar(255)
  message           String?  @db.LongText
  type              String   @db.VarChar(50)
  entityId          String?  @db.VarChar(36) @map("entity_id")
  entityType        String?  @db.VarChar(100) @map("entity_type")
  isRead            Boolean  @default(false) @map("is_read")
  readAt            DateTime? @map("read_at")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@index([userId])
  @@index([isRead])
  @@map("notification")
}
model TaskAssignment {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  workItemId        String   @db.VarChar(36) @map("work_item_id")
  assignedTo        String   @db.Char(36) @map("assigned_to")
  assignedBy        String   @db.Char(36) @map("assigned_by")
  assignmentDate    DateTime @map("assignment_date")
  dueDate           DateTime? @map("due_date") @db.Date
  priority          String   @db.VarChar(50)
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("task_assignment")
}
model ProjectTimeline {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  projectId         String   @db.VarChar(36) @map("project_id")
  milestone         String   @db.VarChar(255)
  targetDate        DateTime @map("target_date") @db.Date
  completionDate    DateTime? @map("completion_date") @db.Date
  status            String   @db.VarChar(50)
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("project_timeline")
}
model TeamMeetingNotes {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  meetingId         String   @db.VarChar(36) @map("meeting_id")
  notes             String?  @db.LongText
  actionItems       String?  @db.Text @map("action_items")
  attendees         String?  @db.Text
  createdBy         String?  @db.Char(36) @map("created_by")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("team_meeting_notes")
}

model FixedAsset {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  assetCode         String   @unique @db.VarChar(50) @map("asset_code")
  assetName         String   @db.VarChar(255) @map("asset_name")
  assetCategory     String   @db.VarChar(100) @map("asset_category")
  acquisitionDate   DateTime @map("acquisition_date") @db.Date
  acquisitionCost   Decimal  @db.Decimal(15, 2) @map("acquisition_cost")
  currentValue      Decimal  @db.Decimal(15, 2) @map("current_value")
  location          String?  @db.VarChar(255)
  status            String   @default("active") @db.VarChar(50)
  usefulLife        Int?     @map("useful_life")
  createdAt         DateTime @default(now()) @map("created_at")
  depreciationSchedules DepreciationSchedule[]
  @@index([tenantId])
  @@index([assetCode])
  @@map("fixed_asset")
}
model DepreciationSchedule {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  assetId           String   @db.VarChar(36) @map("asset_id")
  period            String   @db.VarChar(50)
  openingValue      Decimal  @db.Decimal(15, 2) @map("opening_value")
  depreciationRate  Decimal  @db.Decimal(5, 2) @map("depreciation_rate")
  depreciationAmount Decimal @db.Decimal(15, 2) @map("depreciation_amount")
  closingValue      Decimal  @db.Decimal(15, 2) @map("closing_value")
  createdAt         DateTime @default(now()) @map("created_at")
  asset             FixedAsset @relation(fields: [assetId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@map("depreciation_schedule")
}
model AssetRevaluation {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  assetId           String   @db.VarChar(36) @map("asset_id")
  revaluationDate   DateTime @map("revaluation_date") @db.Date
  previousValue     Decimal  @db.Decimal(15, 2) @map("previous_value")
  newValue          Decimal  @db.Decimal(15, 2) @map("new_value")
  revaluationGainLoss Decimal @db.Decimal(15, 2) @map("revaluation_gain_loss")
  reason            String?  @db.Text
  createdBy         String?  @db.VarChar(36) @map("created_by")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("asset_revaluation")
}
model AssetDisposal {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  assetId           String   @db.VarChar(36) @map("asset_id")
  disposalDate      DateTime @map("disposal_date") @db.Date
  disposalMethod    String   @db.VarChar(50) @map("disposal_method")
  disposalPrice     Decimal  @db.Decimal(15, 2) @map("disposal_price")
  bookValue         Decimal  @db.Decimal(15, 2) @map("book_value")
  gainLoss          Decimal  @db.Decimal(15, 2) @map("gain_loss")
  approvedBy        String?  @db.VarChar(36) @map("approved_by")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("asset_disposal")
}
model AssetMaintenance {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  assetId           String   @db.VarChar(36) @map("asset_id")
  maintenanceType   String   @db.VarChar(50) @map("maintenance_type")
  maintenanceDate   DateTime @map("maintenance_date") @db.Date
  cost              Decimal  @db.Decimal(15, 2)
  vendor            String?  @db.VarChar(255)
  notes             String?  @db.Text
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("asset_maintenance")
}
model AssetTransfer {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  assetId           String   @db.VarChar(36) @map("asset_id")
  transferDate      DateTime @map("transfer_date") @db.Date
  fromLocation      String   @db.VarChar(255) @map("from_location")
  toLocation        String   @db.VarChar(255) @map("to_location")
  reason            String?  @db.Text
  approvedBy        String?  @db.VarChar(36) @map("approved_by")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("asset_transfer")
}

model CostCenter {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  costCenterCode    String   @unique @db.VarChar(50) @map("cost_center_code")
  costCenterName    String   @db.VarChar(255) @map("cost_center_name")
  department        String?  @db.VarChar(100)
  parentCostCenterId String? @db.VarChar(36) @map("parent_cost_center_id")
  manager           String?  @db.VarChar(36)
  status            String   @default("active") @db.VarChar(50)
  createdAt         DateTime @default(now()) @map("created_at")
  costAllocations   CostAllocation[]
  budgets           Budget[]
  @@index([tenantId])
  @@map("cost_center")
}
model CostAllocation {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  costCenterId      String   @db.VarChar(36) @map("cost_center_id")
  glAccountId       String   @db.VarChar(36) @map("gl_account_id")
  amount            Decimal  @db.Decimal(15, 2)
  percentage        Decimal  @db.Decimal(5, 2)
  allocationMethod  String   @db.VarChar(50) @map("allocation_method")
  createdAt         DateTime @default(now()) @map("created_at")
  costCenter        CostCenter @relation(fields: [costCenterId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@map("cost_allocation")
}
model Budget {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  budgetCode        String   @unique @db.VarChar(50) @map("budget_code")
  budgetName        String   @db.VarChar(255) @map("budget_name")
  costCenterId      String   @db.VarChar(36) @map("cost_center_id")
  fiscalYear        Int      @map("fiscal_year")
  budgetPeriod      String   @db.VarChar(20) @map("budget_period")
  budgetedAmount    Decimal  @db.Decimal(15, 2) @map("budgeted_amount")
  actualAmount      Decimal  @db.Decimal(15, 2) @default(0) @map("actual_amount")
  committedAmount   Decimal  @db.Decimal(15, 2) @default(0) @map("committed_amount")
  availableAmount   Decimal  @db.Decimal(15, 2) @map("available_amount")
  status            String   @default("active") @db.VarChar(50)
  createdAt         DateTime @default(now()) @map("created_at")
  costCenter        CostCenter @relation(fields: [costCenterId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@map("budget")
}
model BudgetVariance {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  budgetId          String   @db.VarChar(36) @map("budget_id")
  variancePeriod    String   @db.VarChar(20) @map("variance_period")
  budgetedAmount    Decimal  @db.Decimal(15, 2) @map("budgeted_amount")
  actualAmount      Decimal  @db.Decimal(15, 2) @map("actual_amount")
  varianceAmount    Decimal  @db.Decimal(15, 2) @map("variance_amount")
  variancePercentage Decimal @db.Decimal(5, 2) @map("variance_percentage")
  varianceType      String   @db.VarChar(20) @map("variance_type")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("budget_variance")
}
model BudgetAllocation {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  budgetId          String   @db.VarChar(36) @map("budget_id")
  glAccountId       String   @db.VarChar(36) @map("gl_account_id")
  allocatedAmount   Decimal  @db.Decimal(15, 2) @map("allocated_amount")
  spentAmount       Decimal  @db.Decimal(15, 2) @default(0) @map("spent_amount")
  remainingAmount   Decimal  @db.Decimal(15, 2) @map("remaining_amount")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("budget_allocation")
}
model BudgetApproval {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  budgetId          String   @db.VarChar(36) @map("budget_id")
  approvedBy        String   @db.VarChar(36) @map("approved_by")
  approvalDate      DateTime @map("approval_date") @db.Date
  comments          String?  @db.Text
  status            String   @db.VarChar(50)
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("budget_approval")
}

model Dashboard {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  dashboardName     String   @db.VarChar(255) @map("dashboard_name")
  dashboardType     String   @db.VarChar(100) @map("dashboard_type")
  createdBy         String   @db.VarChar(36) @map("created_by")
  isPublic          Boolean  @default(false) @map("is_public")
  refreshInterval   Int?     @map("refresh_interval")
  status            String   @default("active") @db.VarChar(50)
  createdAt         DateTime @default(now()) @map("created_at")
  widgets           DashboardWidget[]
  @@index([tenantId])
  @@map("dashboard")
}
model DashboardWidget {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  dashboardId       String   @db.VarChar(36) @map("dashboard_id")
  widgetName        String   @db.VarChar(255) @map("widget_name")
  widgetType        String   @db.VarChar(100) @map("widget_type")
  position          Int
  size              String   @db.VarChar(50)
  configuration    String?  @db.LongText
  refreshInterval   Int?     @map("refresh_interval")
  createdAt         DateTime @default(now()) @map("created_at")
  dashboard         Dashboard @relation(fields: [dashboardId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@map("dashboard_widget")
}
model KPIDefinition {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  kpiCode           String   @unique @db.VarChar(100) @map("kpi_code")
  kpiName           String   @db.VarChar(255) @map("kpi_name")
  kpiCategory       String   @db.VarChar(100) @map("kpi_category")
  description       String?  @db.Text
  formula           String   @db.LongText
  targetValue       Decimal? @db.Decimal(15, 4) @map("target_value")
  minValue          Decimal? @db.Decimal(15, 4) @map("min_value")
  maxValue          Decimal? @db.Decimal(15, 4) @map("max_value")
  unit              String   @db.VarChar(50)
  frequency         String   @db.VarChar(50)
  owner             String?  @db.VarChar(36)
  status            String   @default("active") @db.VarChar(50)
  createdAt         DateTime @default(now()) @map("created_at")
  values            KPIValue[]
  @@index([tenantId])
  @@map("kpi_definition")
}
model KPIValue {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  kpiId             String   @db.VarChar(36) @map("kpi_id")
  valueDate         DateTime @map("value_date") @db.Date
  actualValue       Decimal  @db.Decimal(15, 4) @map("actual_value")
  targetValue       Decimal? @db.Decimal(15, 4) @map("target_value")
  variance          Decimal? @db.Decimal(15, 4)
  status            String   @default("normal") @db.VarChar(50)
  trend             String?  @db.VarChar(50)
  createdAt         DateTime @default(now()) @map("created_at")
  kpi               KPIDefinition @relation(fields: [kpiId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@map("kpi_value")
}
model Report {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  reportCode        String   @unique @db.VarChar(100) @map("report_code")
  reportName        String   @db.VarChar(255) @map("report_name")
  reportType        String   @db.VarChar(100) @map("report_type")
  description       String?  @db.Text
  query             String   @db.LongText
  schedule          String?  @db.VarChar(100)
  lastRunDate       DateTime? @map("last_run_date")
  nextRunDate       DateTime? @map("next_run_date")
  owner             String?  @db.VarChar(36)
  isPublished       Boolean  @default(false) @map("is_published")
  status            String   @default("active") @db.VarChar(50)
  createdAt         DateTime @default(now()) @map("created_at")
  executions        ReportExecution[]
  @@index([tenantId])
  @@map("report")
}
model ReportExecution {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  reportId          String   @db.VarChar(36) @map("report_id")
  executedBy        String   @db.VarChar(36) @map("executed_by")
  executionDate     DateTime @map("execution_date") @db.DateTime
  executionTime     Int      @map("execution_time")
  recordCount       Int      @default(0) @map("record_count")
  outputFile        String?  @db.VarChar(255) @map("output_file")
  status            String   @db.VarChar(50)
  errorMessage      String?  @db.Text @map("error_message")
  createdAt         DateTime @default(now()) @map("created_at")
  report            Report @relation(fields: [reportId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@map("report_execution")
}
model AnalyticsDataCache {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  entityType        String   @db.VarChar(100) @map("entity_type")
  period            String   @db.VarChar(50)
  dimensionValues   String?  @db.LongText @map("dimension_values")
  metricName        String   @db.VarChar(255) @map("metric_name")
  metricValue       Decimal  @db.Decimal(15, 4) @map("metric_value")
  lastUpdated       DateTime @map("last_updated") @db.DateTime
  expiryDate        DateTime @map("expiry_date") @db.Date
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("analytics_data_cache")
}
model CustomReport {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  reportName        String   @db.VarChar(255) @map("report_name")
  createdBy         String   @db.VarChar(36) @map("created_by")
  columns           String   @db.LongText
  filters           String?  @db.LongText
  groupBy           String?  @db.LongText @map("group_by")
  orderBy           String?  @db.LongText @map("order_by")
  format            String   @default("pdf") @db.VarChar(50)
  isPublic          Boolean  @default(false) @map("is_public")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("custom_report")
}
model ReportSchedule {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  reportId          String   @db.VarChar(36) @map("report_id")
  frequency         String   @db.VarChar(50)
  dayOfWeek         Int?     @map("day_of_week")
  dayOfMonth        Int?     @map("day_of_month")
  hour              Int
  minute            Int
  emailRecipients   String?  @db.Text @map("email_recipients")
  isActive          Boolean  @default(true) @map("is_active")
  nextRunDate       DateTime @map("next_run_date") @db.DateTime
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("report_schedule")
}
model AnalyticsEvent {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  eventType         String   @db.VarChar(100) @map("event_type")
  entityType        String   @db.VarChar(100) @map("entity_type")
  entityId          String?  @db.VarChar(36) @map("entity_id")
  userId            String?  @db.VarChar(36) @map("user_id")
  eventData         String?  @db.LongText @map("event_data")
  timestamp         DateTime @db.DateTime
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("analytics_event")
}

model MobileDevice {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  userId            String   @db.VarChar(36) @map("user_id")
  deviceId          String   @unique @db.VarChar(255) @map("device_id")
  deviceType        String   @db.VarChar(50) @map("device_type")
  osType            String   @db.VarChar(50) @map("os_type")
  osVersion         String?  @db.VarChar(50) @map("os_version")
  appVersion        String?  @db.VarChar(50) @map("app_version")
  pushToken         String?  @db.Text @map("push_token")
  deviceModel       String?  @db.VarChar(100) @map("device_model")
  manufacturer      String?  @db.VarChar(100)
  isActive          Boolean  @default(true) @map("is_active")
  lastActiveAt      DateTime @map("last_active_at") @db.DateTime
  createdAt         DateTime @default(now()) @map("created_at")
  sessions          MobileSession[]
  pushNotifications MobilePushNotification[]
  @@index([tenantId])
  @@map("mobile_device")
}
model MobileSession {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  deviceId          String   @db.VarChar(36) @map("device_id")
  userId            String   @db.VarChar(36) @map("user_id")
  sessionToken      String   @unique(map: "idx_mobile_session_token") @db.VarChar(500) @map("session_token")
  loginTime         DateTime @map("login_time") @db.DateTime
  logoutTime        DateTime? @map("logout_time") @db.DateTime
  ipAddress         String?  @db.VarChar(45) @map("ip_address")
  userAgent         String?  @db.Text @map("user_agent")
  isActive          Boolean  @default(true) @map("is_active")
  createdAt         DateTime @default(now()) @map("created_at")
  device            MobileDevice @relation(fields: [deviceId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@map("mobile_session")
}
model MobilePushNotification {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  deviceId          String   @db.VarChar(36) @map("device_id")
  title             String   @db.VarChar(255)
  body              String   @db.Text
  notificationType  String   @db.VarChar(100) @map("notification_type")
  entityType        String?  @db.VarChar(100) @map("entity_type")
  entityId          String?  @db.VarChar(36) @map("entity_id")
  payload           String?  @db.LongText
  sentAt            DateTime @map("sent_at") @db.DateTime
  deliveredAt       DateTime? @map("delivered_at") @db.DateTime
  openedAt          DateTime? @map("opened_at") @db.DateTime
  status            String   @default("pending") @db.VarChar(50)
  createdAt         DateTime @default(now()) @map("created_at")
  device            MobileDevice @relation(fields: [deviceId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@map("mobile_push_notification")
}
model MobileAppUpdate {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  versionNumber     String   @db.VarChar(50) @map("version_number")
  releaseNotes      String?  @db.LongText @map("release_notes")
  downloadUrl       String   @db.Text @map("download_url")
  minimumOsVersion  String?  @db.VarChar(50) @map("minimum_os_version")
  forceUpdate       Boolean  @default(false) @map("force_update")
  releaseDate       DateTime @map("release_date") @db.Date
  status            String   @db.VarChar(50)
  downloadCount     Int      @default(0) @map("download_count")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("mobile_app_update")
}
model MobileOfflineData {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  deviceId          String   @db.VarChar(36) @map("device_id")
  entityType        String   @db.VarChar(100) @map("entity_type")
  entityId          String   @db.VarChar(36) @map("entity_id")
  dataSnapshot      String   @db.LongText @map("data_snapshot")
  lastSyncedAt      DateTime @map("last_synced_at") @db.DateTime
  syncRequired      Boolean  @default(false) @map("sync_required")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("mobile_offline_data")
}
model MobileAppConfig {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  configKey         String   @db.VarChar(255) @map("config_key")
  configValue       String   @db.LongText @map("config_value")
  configType        String   @db.VarChar(100) @map("config_type")
  description       String?  @db.Text
  updatedBy         String?  @db.VarChar(36) @map("updated_by")
  updatedAt         DateTime @updatedAt @map("updated_at")
  @@index([tenantId])
  @@map("mobile_app_config")
}
model MobileAnalytics {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  deviceId          String   @db.VarChar(36) @map("device_id")
  screenName        String   @db.VarChar(255) @map("screen_name")
  eventName         String   @db.VarChar(255) @map("event_name")
  eventValue        String?  @db.LongText @map("event_value")
  sessionDuration   Int?     @map("session_duration")
  crashReported     Boolean  @default(false) @map("crash_reported")
  timestamp         DateTime @db.DateTime
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("mobile_analytics")
}

model ConstructionProject {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  projectCode       String   @unique @db.VarChar(50) @map("project_code")
  projectName       String   @db.VarChar(255) @map("project_name")
  location          String   @db.Text
  projectManager    String?  @db.VarChar(36) @map("project_manager")
  startDate         DateTime @map("start_date") @db.Date
  completionDate    DateTime? @map("completion_date") @db.Date
  estimatedBudget   Decimal  @db.Decimal(15, 2) @map("estimated_budget")
  actualBudget      Decimal  @db.Decimal(15, 2) @default(0) @map("actual_budget")
  status            String   @default("planning") @db.VarChar(50)
  percentageComplete Decimal @default(0) @db.Decimal(5, 2) @map("percentage_complete")
  createdAt         DateTime @default(now()) @map("created_at")
  phases            ConstructionPhase[]
  materials         ConstructionMaterial[]
  laborEntries      ConstructionLabor[]
  equipment         ConstructionEquipment[]
  qualityChecks     ConstructionQualityCheck[]
  safetyIncidents   ConstructionSafety[]
  siteVisits        SiteVisit[]
  @@index([tenantId])
  @@map("construction_project")
}
model ConstructionPhase {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  projectId         String   @db.VarChar(36) @map("project_id")
  phaseName         String   @db.VarChar(255) @map("phase_name")
  description       String?  @db.Text
  startDate         DateTime @map("start_date") @db.Date
  expectedEndDate   DateTime @map("expected_end_date") @db.Date
  actualEndDate     DateTime? @map("actual_end_date") @db.Date
  budgetedAmount    Decimal  @db.Decimal(15, 2) @map("budgeted_amount")
  actualAmount      Decimal  @db.Decimal(15, 2) @default(0) @map("actual_amount")
  status            String   @default("not_started") @db.VarChar(50)
  sequence          Int
  createdAt         DateTime @default(now()) @map("created_at")
  project           ConstructionProject @relation(fields: [projectId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@map("construction_phase")
}
model ConstructionMaterial {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  projectId         String   @db.VarChar(36) @map("project_id")
  materialCode      String   @db.VarChar(100) @map("material_code")
  materialName      String   @db.VarChar(255) @map("material_name")
  quantity          Decimal  @db.Decimal(18, 4)
  unit              String   @db.VarChar(50)
  unitCost          Decimal  @db.Decimal(15, 2) @map("unit_cost")
  totalCost         Decimal  @db.Decimal(15, 2) @map("total_cost")
  supplier          String?  @db.VarChar(255)
  deliveryDate      DateTime @map("delivery_date") @db.Date
  receivedQuantity  Decimal  @default(0) @db.Decimal(18, 4) @map("received_quantity")
  wastageQuantity   Decimal  @default(0) @db.Decimal(18, 4) @map("wastage_quantity")
  status            String   @default("pending") @db.VarChar(50)
  createdAt         DateTime @default(now()) @map("created_at")
  project           ConstructionProject @relation(fields: [projectId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@map("construction_material")
}
model ConstructionLabor {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  projectId         String   @db.VarChar(36) @map("project_id")
  laborDate         DateTime @map("labor_date") @db.Date
  laborType         String   @db.VarChar(100) @map("labor_type")
  workers           Int
  hoursPerWorker    Decimal  @db.Decimal(5, 2) @map("hours_per_worker")
  ratePerHour       Decimal  @db.Decimal(10, 2) @map("rate_per_hour")
  totalCost         Decimal  @db.Decimal(15, 2) @map("total_cost")
  supervisor        String?  @db.VarChar(36)
  notes             String?  @db.Text
  createdAt         DateTime @default(now()) @map("created_at")
  project           ConstructionProject @relation(fields: [projectId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@map("construction_labor")
}
model ConstructionEquipment {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  projectId         String   @db.VarChar(36) @map("project_id")
  equipmentCode     String   @unique @db.VarChar(100) @map("equipment_code")
  equipmentName     String   @db.VarChar(255) @map("equipment_name")
  equipmentType     String   @db.VarChar(100) @map("equipment_type")
  allocationDate    DateTime @map("allocation_date") @db.Date
  releaseDate       DateTime? @map("release_date") @db.Date
  dailyCost         Decimal  @db.Decimal(15, 2) @map("daily_cost")
  totalCost         Decimal  @db.Decimal(15, 2) @default(0) @map("total_cost")
  status            String   @default("allocated") @db.VarChar(50)
  createdAt         DateTime @default(now()) @map("created_at")
  project           ConstructionProject @relation(fields: [projectId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@map("construction_equipment")
}
model ConstructionQualityCheck {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  projectId         String   @db.VarChar(36) @map("project_id")
  checkDate         DateTime @map("check_date") @db.Date
  checkType         String   @db.VarChar(100) @map("check_type")
  checkedBy         String   @db.VarChar(36) @map("checked_by")
  area              String   @db.VarChar(255)
  findings          String?  @db.LongText
  status            String   @db.VarChar(50)
  passedCriteria    Int      @map("passed_criteria")
  totalCriteria     Int      @map("total_criteria")
  nextCheckDate     DateTime? @map("next_check_date") @db.Date
  createdAt         DateTime @default(now()) @map("created_at")
  project           ConstructionProject @relation(fields: [projectId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@map("construction_quality_check")
}
model ConstructionSafety {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  projectId         String   @db.VarChar(36) @map("project_id")
  incidentDate      DateTime @map("incident_date") @db.Date
  incidentType      String   @db.VarChar(100) @map("incident_type")
  severity          String   @db.VarChar(50)
  description       String   @db.LongText
  reportedBy        String   @db.VarChar(36) @map("reported_by")
  affectedWorkers   Int?     @map("affected_workers")
  lostDays          Int?     @map("lost_days")
  investigationRequired Boolean @default(false) @map("investigation_required")
  status            String   @default("reported") @db.VarChar(50)
  createdAt         DateTime @default(now()) @map("created_at")
  project           ConstructionProject @relation(fields: [projectId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@map("construction_safety")
}
model SiteVisit {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  projectId         String   @db.VarChar(36) @map("project_id")
  visitDate         DateTime @map("visit_date") @db.Date
  visitedBy         String   @db.VarChar(36) @map("visited_by")
  purpose           String   @db.Text
  observations      String?  @db.LongText
  photographs       String?  @db.LongText
  actionsRequired   String?  @db.LongText @map("actions_required")
  status            String   @default("completed") @db.VarChar(50)
  createdAt         DateTime @default(now()) @map("created_at")
  project           ConstructionProject @relation(fields: [projectId], references: [id], onDelete: Cascade)
  @@index([tenantId])
  @@map("site_visit")
}

model CustomFieldDefinition {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  fieldName         String   @db.VarChar(255) @map("field_name")
  fieldCode         String   @db.VarChar(100) @map("field_code")
  entityType        String   @db.VarChar(100) @map("entity_type")
  fieldType         String   @db.VarChar(50) @map("field_type")
  fieldLength       Int?     @map("field_length")
  isRequired        Boolean  @default(false) @map("is_required")
  isUnique          Boolean  @default(false) @map("is_unique")
  defaultValue      String?  @db.Text @map("default_value")
  validationRule    String?  @db.Text @map("validation_rule")
  displayOrder      Int      @map("display_order")
  helpText          String?  @db.Text @map("help_text")
  status            String   @default("active") @db.VarChar(50)
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("custom_field_definition")
}
model CustomFieldValue {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  fieldDefinitionId String   @db.VarChar(36) @map("field_definition_id")
  entityType        String   @db.VarChar(100) @map("entity_type")
  entityId          String   @db.VarChar(36) @map("entity_id")
  fieldValue        String?  @db.LongText @map("field_value")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("custom_field_value")
}
model MultiLanguageResource {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  resourceKey       String   @db.VarChar(255) @map("resource_key")
  language          String   @db.VarChar(10)
  resourceValue     String   @db.LongText @map("resource_value")
  resourceContext   String?  @db.VarChar(100) @map("resource_context")
  lastUpdated       DateTime @map("last_updated") @db.DateTime
  createdAt         DateTime @default(now()) @map("created_at")
  @@unique([resourceKey, language, tenantId])
  @@index([tenantId])
  @@map("multi_language_resource")
}
model DataImportTemplate {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  templateName      String   @db.VarChar(255) @map("template_name")
  templateCode      String   @unique @db.VarChar(100) @map("template_code")
  entityType        String   @db.VarChar(100) @map("entity_type")
  fileFormat        String   @db.VarChar(50) @map("file_format")
  columnMapping     String   @db.LongText @map("column_mapping")
  validationRules   String?  @db.LongText @map("validation_rules")
  transformations   String?  @db.LongText
  createdBy         String   @db.VarChar(36) @map("created_by")
  isPublished       Boolean  @default(false) @map("is_published")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("data_import_template")
}
model DataImportJob {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  templateId        String   @db.VarChar(36) @map("template_id")
  fileName          String   @db.VarChar(255) @map("file_name")
  filePath          String   @db.Text @map("file_path")
  uploadedBy        String   @db.VarChar(36) @map("uploaded_by")
  totalRecords      Int      @default(0) @map("total_records")
  successCount      Int      @default(0) @map("success_count")
  errorCount        Int      @default(0) @map("error_count")
  status            String   @default("pending") @db.VarChar(50)
  errorLog          String?  @db.LongText @map("error_log")
  startTime         DateTime? @map("start_time") @db.DateTime
  completionTime    DateTime? @map("completion_time") @db.DateTime
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("data_import_job")
}
model DataExportTemplate {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  templateName      String   @db.VarChar(255) @map("template_name")
  templateCode      String   @unique @db.VarChar(100) @map("template_code")
  entityType        String   @db.VarChar(100) @map("entity_type")
  columns           String   @db.LongText
  filters           String?  @db.LongText
  sortOrder         String?  @db.LongText @map("sort_order")
  fileFormat        String   @db.VarChar(50) @map("file_format")
  createdBy         String   @db.VarChar(36) @map("created_by")
  isPublished       Boolean  @default(false) @map("is_published")
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("data_export_template")
}
model DataExportJob {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  templateId        String   @db.VarChar(36) @map("template_id")
  requestedBy       String   @db.VarChar(36) @map("requested_by")
  totalRecords      Int      @default(0) @map("total_records")
  exportedRecords   Int      @default(0) @map("exported_records")
  status            String   @default("pending") @db.VarChar(50)
  fileLocation      String?  @db.Text @map("file_location")
  downloadUrl       String?  @db.Text @map("download_url")
  expiryDate        DateTime? @map("expiry_date") @db.Date
  startTime         DateTime? @map("start_time") @db.DateTime
  completionTime    DateTime? @map("completion_time") @db.DateTime
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("data_export_job")
}
model Plugin {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  pluginName        String   @db.VarChar(255) @map("plugin_name")
  pluginCode        String   @unique @db.VarChar(100) @map("plugin_code")
  pluginVersion     String   @db.VarChar(50) @map("plugin_version")
  author            String?  @db.VarChar(255)
  description       String?  @db.LongText
  pluginUrl         String?  @db.Text @map("plugin_url")
  settings          String?  @db.LongText
  isActive          Boolean  @default(false) @map("is_active")
  installDate       DateTime @map("install_date") @db.Date
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("plugin")
}
model PluginEvent {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  pluginId          String   @db.VarChar(36) @map("plugin_id")
  eventType         String   @db.VarChar(100) @map("event_type")
  eventData         String?  @db.LongText @map("event_data")
  eventStatus       String   @db.VarChar(50) @map("event_status")
  executionTime     Int?     @map("execution_time")
  errorMessage      String?  @db.Text @map("error_message")
  timestamp         DateTime @db.DateTime
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("plugin_event")
}
model ServiceIntegration {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  integrationName   String   @db.VarChar(255) @map("integration_name")
  integrationCode   String   @unique @db.VarChar(100) @map("integration_code")
  serviceType       String   @db.VarChar(100) @map("service_type")
  apiEndpoint       String   @db.Text @map("api_endpoint")
  apiKey            String?  @db.Text @map("api_key")
  authType          String   @db.VarChar(50) @map("auth_type")
  settings          String?  @db.LongText
  isActive          Boolean  @default(false) @map("is_active")
  lastSyncDate      DateTime? @map("last_sync_date") @db.DateTime
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("service_integration")
}
model IntegrationLog {
  id                String   @id @db.Char(36)
  tenantId          String   @db.VarChar(36) @map("tenant_id")
  integrationId     String   @db.VarChar(36) @map("integration_id")
  action            String   @db.VarChar(100)
  requestData       String?  @db.LongText @map("request_data")
  responseData      String?  @db.LongText @map("response_data")
  statusCode        Int?     @map("status_code")
  errorMessage      String?  @db.Text @map("error_message")
  executionTime     Int?     @map("execution_time")
  timestamp         DateTime @db.DateTime
  createdAt         DateTime @default(now()) @map("created_at")
  @@index([tenantId])
  @@map("integration_log")
}

model ImportShipment {
  id                      String    @id @default(cuid())
  tenantId                String
  shipmentNumber          String    @unique  // BOL or customs reference
  containerNumber         String?
  vesselName              String?
  voyageNumber            String?
  exporterName            String
  exporterCountry         String    // ISO country code
  importerName            String
  importerIEC             String    // IEC (Importer-Exporter Code)
  importLicense           ImportLicense? @relation("ImportShipmentToLicense", fields: [importLicenseId], references: [id])
  importLicenseId         String?
  incoterm                String    // CIF, FOB, CNF, DDP, etc.
  cifValue                Decimal   @db.Decimal(15, 2)
  fobValue                Decimal   @db.Decimal(15, 2)
  insuranceValue          Decimal   @db.Decimal(12, 2)
  freight                 Decimal   @db.Decimal(12, 2)
  quantity                Decimal   @db.Decimal(12, 3)
  unit                    String    // KG, PCS, MT, etc.
  hsCodeLineItems         ImportHSCodeLineItem[]
  customsDocumentation    CustomsDocumentation[]
  dutyCalculations        DutyCalculation[]
  status                  String    // "In-Transit", "PortArrived", "CustomsClearing", "Cleared", "Delivered"
  estimatedArrival        DateTime?
  actualArrival           DateTime?
  clearanceDate           DateTime?
  warehouseId             String?
  vendorInvoiceId         String?
  shipmentTracking        ShipmentTracking[]
  complianceCheck         ComplianceCheckImEx?
  createdAt               DateTime  @default(now())
  updatedAt               DateTime  @updatedAt
  userId                  String
  @@index([tenantId])
  @@index([status])
  @@index([estimatedArrival])
}
model ExportShipment {
  id                      String    @id @default(cuid())
  tenantId                String
  shipmentNumber          String    @unique  // Export reference
  containerNumber         String?
  vesselName              String?
  voyageNumber            String?
  exporterName            String
  exporterIEC             String    // IEC for exports
  importerName            String
  importerCountry         String    // ISO country code
  salesOrderId            String?
  invoiceId               String?
  incoterm                String    // FOB, CIF, CIP, DDP, etc.
  fobValue                Decimal   @db.Decimal(15, 2)
  quantity                Decimal   @db.Decimal(12, 3)
  unit                    String
  hsCodeLineItems         ExportHSCodeLineItem[]
  customsDocumentation    CustomsDocumentation[]
  status                  String    // "Packed", "In-Transit", "Delivered", "Lost"
  shipmentDate            DateTime
  deliveryDate            DateTime?
  shipmentTracking        ShipmentTracking[]
  complianceCheck         ComplianceCheckImEx?
  createdAt               DateTime  @default(now())
  updatedAt               DateTime  @updatedAt
  userId                  String
  @@index([tenantId])
  @@index([status])
  @@index([shipmentDate])
}
model ImportHSCodeLineItem {
  id                      String    @id @default(cuid())
  tenantId                String
  importShipment          ImportShipment @relation(fields: [importShipmentId], references: [id], onDelete: Cascade)
  importShipmentId        String
  hsCode                  String    @db.Char(8)  // 8-digit Harmonized System code
  description             String
  quantity                Decimal   @db.Decimal(12, 3)
  unit                    String    // KG, PCS, MT, etc.
  unitPrice               Decimal   @db.Decimal(12, 4)
  cifValue                Decimal   @db.Decimal(15, 2)
  dutyCalculation         DutyCalculation?
  gstRate                 Decimal   @db.Decimal(5, 2)
  gstAmount               Decimal   @db.Decimal(12, 2)
  stockLevel              StockLevel? @relation(fields: [stockLevelId], references: [id])
  stockLevelId            String?
  createdAt               DateTime  @default(now())
  updatedAt               DateTime  @updatedAt
  @@index([importShipmentId])
  @@index([hsCode])
}
model ExportHSCodeLineItem {
  id                      String    @id @default(cuid())
  tenantId                String
  exportShipment          ExportShipment @relation(fields: [exportShipmentId], references: [id], onDelete: Cascade)
  exportShipmentId        String
  hsCode                  String    @db.Char(8)
  description             String
  quantity                Decimal   @db.Decimal(12, 3)
  unit                    String
  unitPrice               Decimal   @db.Decimal(12, 4)
  fobValue                Decimal   @db.Decimal(15, 2)
  salesOrderLineItem      SalesOrderLineItem? @relation(fields: [soLineItemId], references: [id])
  soLineItemId            String?
  createdAt               DateTime  @default(now())
  updatedAt               DateTime  @updatedAt
  @@index([exportShipmentId])
  @@index([hsCode])
}
model DutyCalculation {
  id                      String    @id @default(cuid())
  tenantId                String
  importShipment          ImportShipment @relation(fields: [importShipmentId], references: [id])
  importShipmentId        String
  lineItem                ImportHSCodeLineItem @relation(fields: [lineItemId], references: [id], onDelete: Cascade)
  lineItemId              String    @unique
  basicCustomsDutyRate    Decimal   @db.Decimal(5, 2)   // 0-100%
  basicCustomsDuty        Decimal   @db.Decimal(12, 2)
  additionalDutyRate      Decimal   @db.Decimal(5, 2)   // 0-20% (countervailing duty)
  additionalDuty          Decimal   @db.Decimal(12, 2)
  safeguardDutyRate       Decimal   @db.Decimal(5, 2)   // 0-25% (if notified)
  safeguardDuty           Decimal   @db.Decimal(12, 2)
  antiDumpingDutyRate     Decimal   @db.Decimal(5, 2)   // 0-50% (if notified)
  antiDumpingDuty         Decimal   @db.Decimal(12, 2)
  totalCustomsDuty        Decimal   @db.Decimal(15, 2)
  iGSTRate                Decimal   @db.Decimal(5, 2)   // On CIF + Duty
  iGST                    Decimal   @db.Decimal(12, 2)
  tradeAgreement          TradeAgreementPreference? @relation(fields: [tradeAgreementId], references: [id])
  tradeAgreementId        String?
  preferentialDutyRate    Decimal   @db.Decimal(5, 2)   // Reduced duty %
  preferentialDuty        Decimal   @db.Decimal(12, 2)  // If FTA/CEPA applied
  totalPayable            Decimal   @db.Decimal(15, 2)  // Sum of all duties + GST
  createdAt               DateTime  @default(now())
  updatedAt               DateTime  @updatedAt
  @@index([importShipmentId])
}
model CustomsDocumentation {
  id                      String    @id @default(cuid())
  tenantId                String
  importShipment          ImportShipment? @relation(fields: [importShipmentId], references: [id])
  importShipmentId        String?
  exportShipment          ExportShipment? @relation(fields: [exportShipmentId], references: [id])
  exportShipmentId        String?
  documentType            String    // "BOE", "GatePass", "FF240", "PackingList", "CommercialInvoice", "CertificateOfOrigin"
  documentNumber          String    // Official customs reference (e.g., BOE number)
  referenceNumber         String    // User-friendly reference
  status                  String    // "Draft", "Filed", "Approved", "Rejected"
  generatedDate           DateTime
  filedDate               DateTime?
  approvedDate            DateTime?
  rejectionReason         String?
  documentFile            Bytes?    // PDF stored as LONGBLOB
  documentPath            String?   // If stored on cloud (S3, etc.)
  createdAt               DateTime  @default(now())
  updatedAt               DateTime  @updatedAt
  userId                  String
  approverUserId          String?
  @@index([tenantId])
  @@index([documentType])
  @@index([status])
}
model ShipmentTracking {
  id                      String    @id @default(cuid())
  tenantId                String
  importShipment          ImportShipment? @relation(fields: [importShipmentId], references: [id])
  importShipmentId        String?
  exportShipment          ExportShipment? @relation(fields: [exportShipmentId], references: [id])
  exportShipmentId        String?
  location                String    // Port, In-Transit, Warehouse, Customs, etc.
  status                  String    // "In-Transit", "Arrived", "CustomsClearing", "Cleared", "Delivered"
  timestamp               DateTime
  notes                   String?
  gpsCoordinates          String?   // Lat,Long for real-time tracking
  createdAt               DateTime  @default(now())
  @@index([tenantId])
  @@index([importShipmentId])
  @@index([exportShipmentId])
  @@index([timestamp])
}
model ImportLicense {
  id                      String    @id @default(cuid())
  tenantId                String
  licenseNumber           String    @unique  // IEC number
  licenseType             String    // "Individual", "Partnership", "Company", "Association"
  tradingCategory         String    // "General", "Restricted", "Prohibited"
  validityFrom            DateTime
  validityTo              DateTime
  status                  String    // "Active", "Suspended", "Expired", "Cancelled"
  issuedBy                String    // DGFT (Directorate General of Foreign Trade)
  importShipments         ImportShipment[] @relation("ImportShipmentToLicense")
  createdAt               DateTime  @default(now())
  updatedAt               DateTime  @updatedAt
  @@index([tenantId])
  @@index([licenseNumber])
  @@index([status])
}
model ComplianceCheckImEx {
  id                      String    @id @default(cuid())
  tenantId                String
  importShipment          ImportShipment? @relation(fields: [importShipmentId], references: [id])
  importShipmentId        String?    @unique
  exportShipment          ExportShipment? @relation(fields: [exportShipmentId], references: [id])
  exportShipmentId        String?    @unique
  gstIECMatch             Boolean   @default(false)  // IEC in GSTN matches
  gstEligibleForITC       Boolean   @default(false)  // Can claim input credit
  gstRate                 Decimal   @db.Decimal(5, 2)
  gstCompliance           String    // "Compliant", "Non-Compliant", "Flagged"
  dgftRestricted          Boolean   @default(false)  // Item on restricted list
  dgftLicenseRequired     Boolean   @default(false)  // License needed
  dgftLicenseNumber       String?   // Reference to license
  dgftStatus              String    // "Cleared", "Flagged", "Rejected"
  rbiEligible             Boolean   @default(false)  // Complies with RBI guidelines
  femaCompliant           Boolean   @default(false)  // Advance remittance allowed
  advanceRemittanceAllowed Boolean @default(false)  // >180 days advance payment OK
  femaStatus              String    // "Compliant", "Non-Compliant"
  overallStatus           String    // "Compliant", "Non-Compliant", "Flagged", "Rejected"
  issues                  String?   // JSON array of compliance issues found
  createdAt               DateTime  @default(now())
  updatedAt               DateTime  @updatedAt
  userId                  String
  @@index([tenantId])
  @@index([overallStatus])
}
model ImportExportPartner {
  id                      String    @id @default(cuid())
  tenantId                String
  partnerType             String    // "FreightForwarder", "CustomsAgent", "Consolidator", "Bank"
  companyName             String
  licenseNumber           String    // CHA, FF license
  licenseCategory         String    // "Customs Agent", "Freight Forwarder", etc.
  validUntil              DateTime
  portsOfOperation        Json                  // Array of port codes
  countriesCovered        Json                  // Array of country codes
  contactName             String
  email                   String
  phone                   String
  website                 String?
  reliabilityRating       Decimal   @db.Decimal(3, 1) @default(0)  // 0-5 stars
  turnaroundTime          Int       @default(0)  // Days
  isActive                Boolean   @default(true)
  createdAt               DateTime  @default(now())
  updatedAt               DateTime  @updatedAt
  @@index([tenantId])
  @@index([partnerType])
  @@index([isActive])
}
model HSCodeMaster {
  id                      String    @id @default(cuid())
  tenantId                String
  hsCode                  String    @unique @db.Char(8)  // 8-digit code
  description             String
  longDescription         String?
  gstRate                 Decimal   @db.Decimal(5, 2)  // 0, 5, 12, 18, 28
  gstCategory             String    // "Exempt", "Standard", "Reduced"
  basicCustomsDutyRate    Decimal   @db.Decimal(5, 2)
  additionalDutyRate      Decimal   @db.Decimal(5, 2)
  isExempted              Boolean   @default(false)     // GST exempt
  isSafeguardApplicable   Boolean   @default(false)
  isAntiDumpingApplicable Boolean   @default(false)
  isRestricted            Boolean   @default(false)     // Restricted import/export
  requiresLicense         Boolean   @default(false)     // License needed
  restrictions            String?   // "Prohibited", "Licensed", etc.
  notes                   String?
  lastUpdatedFrom         String    // "CBIC", "Ministry", "GoI Website"
  lastUpdatedDate         DateTime
  validFrom               DateTime
  validTo                 DateTime?
  createdAt               DateTime  @default(now())
  updatedAt               DateTime  @updatedAt
  @@index([tenantId])
  @@index([hsCode])
  @@index([gstRate])
}
model TradeAgreementPreference {
  id                      String    @id @default(cuid())
  tenantId                String
  agreementName           String    // "India-UAE CEPA", "India-UK DTTA", "India-Mauritius CEPA", etc.
  agreementCode           String    // ISO code (e.g., "CEPA-AE", "DTTA-GB")
  hsCode                  String    @db.Char(8)
  originCountry           String    // ISO country code (e.g., "AE" for UAE)
  standardDutyRate        Decimal   @db.Decimal(5, 2)   // Normal duty %
  preferentialDutyRate    Decimal   @db.Decimal(5, 2)   // Reduced duty %
  dutyReduction           Decimal   @db.Decimal(5, 2)   // Absolute saving %
  requiresDocuments       Json                         // ["Certificate of Origin", "Certificate of Authenticity"]
  documentType            String    // "Form A", "Form D", "CIQ", "ECS", etc.
  validFrom               DateTime
  validTo                 DateTime?
  isActive                Boolean   @default(true)
  dutyCalculations        DutyCalculation[]
  createdAt               DateTime  @default(now())
  updatedAt               DateTime  @updatedAt
  @@index([tenantId])
  @@index([agreementName])
  @@index([hsCode])
  @@index([originCountry])
}