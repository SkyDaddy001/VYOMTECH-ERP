# VYOM ERP - Production Environment Configuration
# January 1, 2026 Go-Live
# SECURE: Store sensitive values in AWS Secrets Manager, Vault, or environment

# ============================================================
# APPLICATION CONFIGURATION
# ============================================================
APP_NAME=vyom-erp
APP_ENV=production
APP_PORT=8080
APP_HOST=0.0.0.0
GIN_MODE=release

# ============================================================
# DATABASE CONFIGURATION (Production)
# ============================================================
# Use managed PostgreSQL: AWS RDS, Azure Database, Google Cloud SQL
DB_HOST=${DB_HOST}
DB_PORT=5432
DB_USER=${DB_USER}
DB_PASSWORD=${DB_PASSWORD}
DB_NAME=vyom_erp_prod
DATABASE_URL=postgresql://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:5432/vyom_erp_prod

# Database Connection Pool (Production)
DB_MAX_CONNECTIONS=100
DB_MIN_CONNECTIONS=10
DB_CONNECTION_TIMEOUT=10s
DB_IDLE_TIMEOUT=5m

# ============================================================
# REDIS CONFIGURATION (Production)
# ============================================================
# Use managed Redis: AWS ElastiCache, Azure Cache for Redis, Google Memorystore
REDIS_HOST=${REDIS_HOST}
REDIS_PORT=6379
REDIS_PASSWORD=${REDIS_PASSWORD}
REDIS_DB=0
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:6379/0
REDIS_MAX_RETRIES=5
REDIS_POOL_SIZE=50

# ============================================================
# JWT & SECURITY (Production)
# ============================================================
JWT_SECRET=${JWT_SECRET}
JWT_EXPIRY=24h
JWT_REFRESH_EXPIRY=7d
JWT_ALGORITHM=HS256

# API Keys & Secrets (from Secrets Manager)
API_SECRET_KEY=${API_SECRET_KEY}
API_KEY_PREFIX=vyom_

# ============================================================
# GOOGLE OAUTH 2.0 (Production)
# ============================================================
GOOGLE_OAUTH_CLIENT_ID=${GOOGLE_OAUTH_CLIENT_ID}
GOOGLE_OAUTH_CLIENT_SECRET=${GOOGLE_OAUTH_CLIENT_SECRET}
GOOGLE_OAUTH_REDIRECT_URI=https://api.vyom-erp.com/api/v1/auth/callback/google
GOOGLE_OAUTH_SCOPES=https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile

# ============================================================
# META OAUTH 2.0 (Production)
# ============================================================
META_OAUTH_CLIENT_ID=${META_OAUTH_CLIENT_ID}
META_OAUTH_CLIENT_SECRET=${META_OAUTH_CLIENT_SECRET}
META_OAUTH_REDIRECT_URI=https://api.vyom-erp.com/api/v1/auth/callback/meta
META_OAUTH_SCOPES=email public_profile

# ============================================================
# GOOGLE ADS API (Production)
# ============================================================
GOOGLE_ADS_DEVELOPER_TOKEN=${GOOGLE_ADS_DEVELOPER_TOKEN}
GOOGLE_ADS_CLIENT_ID=${GOOGLE_ADS_CLIENT_ID}
GOOGLE_ADS_CLIENT_SECRET=${GOOGLE_ADS_CLIENT_SECRET}
GOOGLE_ADS_REFRESH_TOKEN=${GOOGLE_ADS_REFRESH_TOKEN}
GOOGLE_ADS_CUSTOMER_ID=${GOOGLE_ADS_CUSTOMER_ID}
GOOGLE_ADS_API_VERSION=v16

# ============================================================
# META ADS API (Production)
# ============================================================
META_BUSINESS_ACCOUNT_ID=${META_BUSINESS_ACCOUNT_ID}
META_AD_ACCOUNT_ID=${META_AD_ACCOUNT_ID}
META_ACCESS_TOKEN=${META_ACCESS_TOKEN}
META_GRAPH_API_VERSION=v18.0

# ============================================================
# RAZORPAY PAYMENT GATEWAY (Production)
# ============================================================
RAZORPAY_KEY_ID=${RAZORPAY_KEY_ID}
RAZORPAY_KEY_SECRET=${RAZORPAY_KEY_SECRET}
RAZORPAY_WEBHOOK_SECRET=${RAZORPAY_WEBHOOK_SECRET}
RAZORPAY_ACCOUNT_ID=${RAZORPAY_ACCOUNT_ID}
RAZORPAY_MODE=live

# ============================================================
# BILLDESK PAYMENT GATEWAY (Production)
# ============================================================
BILLDESK_CLIENT_ID=${BILLDESK_CLIENT_ID}
BILLDESK_CLIENT_SECRET=${BILLDESK_CLIENT_SECRET}
BILLDESK_MERCHANT_ID=${BILLDESK_MERCHANT_ID}
BILLDESK_ENVIRONMENT=production
BILLDESK_WEBHOOK_SECRET=${BILLDESK_WEBHOOK_SECRET}

# ============================================================
# CORS & SECURITY (Production)
# ============================================================
CORS_ORIGINS=https://app.vyom-erp.com,https://www.vyom-erp.com
CORS_CREDENTIALS=true
CORS_MAX_AGE=86400
CORS_ALLOWED_METHODS=GET,POST,PUT,PATCH,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With

# ============================================================
# API RATE LIMITING (Production)
# ============================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=1000
RATE_LIMIT_WINDOW=60s
RATE_LIMIT_BURST=100

# ============================================================
# LOGGING & MONITORING (Production)
# ============================================================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_OUTPUT=stdout
LOG_FILE=/var/log/vyom-erp/api.log
LOG_MAX_SIZE=500
LOG_MAX_BACKUPS=10
LOG_MAX_AGE=30

# Monitoring
ENABLE_PROFILING=false
PROFILING_PORT=6060
METRICS_ENABLED=true

# ============================================================
# SYNC JOB CONFIGURATION (Production)
# ============================================================
SYNC_JOB_ENABLED=true
SYNC_JOB_INTERVAL=30s

# Google Ads Sync (Hourly)
SYNC_GOOGLE_ADS_ENABLED=true
SYNC_GOOGLE_ADS_INTERVAL=3600s

# Meta Ads Sync (Hourly)
SYNC_META_ADS_ENABLED=true
SYNC_META_ADS_INTERVAL=3600s

# Attribution Sync (4 hours)
SYNC_ATTRIBUTION_ENABLED=true
SYNC_ATTRIBUTION_INTERVAL=14400s

# ROI Sync (6 hours)
SYNC_ROI_ENABLED=true
SYNC_ROI_INTERVAL=21600s

# ============================================================
# EMAIL CONFIGURATION (Production)
# ============================================================
EMAIL_PROVIDER=sendgrid
SENDGRID_API_KEY=${SENDGRID_API_KEY}
SENDGRID_FROM_EMAIL=noreply@vyom-erp.com

# ============================================================
# AWS S3 CONFIGURATION (Production)
# ============================================================
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
AWS_S3_BUCKET=vyom-erp-prod
AWS_S3_ENDPOINT=https://s3.amazonaws.com

# ============================================================
# STORAGE & FILE UPLOADS
# ============================================================
UPLOAD_MAX_SIZE=10485760
UPLOAD_PATH=/var/uploads
STORAGE_TYPE=s3

# ============================================================
# FEATURE FLAGS (Production)
# ============================================================
ENABLE_OAUTH=true
ENABLE_GOOGLE_ADS=true
ENABLE_META_ADS=true
ENABLE_PAYMENT_GATEWAY=true
ENABLE_AI_FEATURES=true
ENABLE_ADVANCED_REPORTING=true
ENABLE_CUSTOM_WORKFLOWS=true

# ============================================================
# PRODUCTION SETTINGS
# ============================================================
DEBUG_MODE=false
VERBOSE_LOGGING=false
SHOW_SQL_LOGS=false
ALLOW_CORS_WILDCARD=false

# ============================================================
# API CONFIGURATION (Production)
# ============================================================
API_TIMEOUT=30s
API_READ_TIMEOUT=15s
API_WRITE_TIMEOUT=15s
API_IDLE_TIMEOUT=60s
API_VERSION=v1

# ============================================================
# TENANT CONFIGURATION
# ============================================================
DEFAULT_TENANT_ID=vyom-main
MULTI_TENANT_MODE=true
TENANT_ISOLATION_ENABLED=true

# ============================================================
# WEBHOOK CONFIGURATION (Production)
# ============================================================
WEBHOOK_TIMEOUT=30s
WEBHOOK_MAX_RETRIES=5
WEBHOOK_RETRY_INTERVAL=10s

# ============================================================
# SSL/TLS CONFIGURATION
# ============================================================
SSL_ENABLED=true
SSL_CERT_PATH=/etc/ssl/certs/api.vyom-erp.com.crt
SSL_KEY_PATH=/etc/ssl/private/api.vyom-erp.com.key

# ============================================================
# NOTE: All sensitive values should be injected from:
# - AWS Secrets Manager
# - HashiCorp Vault
# - Kubernetes Secrets
# - Environment variables at runtime
# 
# DO NOT commit actual secrets to version control
# ============================================================

# Logging & Monitoring
LOG_FORMAT=json
LOG_LEVEL=info
SENTRY_DSN=${SENTRY_DSN}
DATADOG_API_KEY=${DATADOG_API_KEY}

# Performance & Scaling
WORKER_POOL_SIZE=10
REQUEST_TIMEOUT=30s
GRACEFUL_SHUTDOWN_TIMEOUT=30s

# TLS/SSL
TLS_ENABLED=true
TLS_CERT_PATH=/etc/ssl/certs/vyom-api.crt
TLS_KEY_PATH=/etc/ssl/private/vyom-api.key

# CORS Configuration
CORS_ALLOWED_ORIGINS=https://app.vyom-erp.com,https://vyom-erp.com
CORS_ALLOW_CREDENTIALS=true

# Feature Flags
FEATURE_ATTRIBUTION=true
FEATURE_ROI_ANALYTICS=true
FEATURE_MULTI_TENANT=true
FEATURE_BACKGROUND_JOBS=true

# Email Configuration (for alerts)
SMTP_HOST=${SMTP_HOST:-smtp.example.com}
SMTP_PORT=${SMTP_PORT:-587}
SMTP_USER=${SMTP_USER}
SMTP_PASSWORD=${SMTP_PASSWORD}
ALERT_EMAIL=${ALERT_EMAIL:-ops@vyom-erp.com}

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_FREQUENCY=daily
BACKUP_RETENTION_DAYS=30
BACKUP_DESTINATION=s3://vyom-backups/

# API Version
API_VERSION=1.0.0
BUILD_TIMESTAMP=$(date -u +"%Y-%m-%dT%H:%M:%SZ")
